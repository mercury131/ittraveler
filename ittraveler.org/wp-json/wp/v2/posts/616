{"id":616,"date":"2015-06-23T17:01:18","date_gmt":"2015-06-23T14:01:18","guid":{"rendered":"http:\/\/ittraveler.org\/?p=616"},"modified":"2020-04-26T18:32:04","modified_gmt":"2020-04-26T15:32:04","slug":"nastrojka-otkazoustojchivogo-veb-servera-na-baze-nginx-i-apache","status":"publish","type":"post","link":"http:\/\/ittraveler.org\/nastrojka-otkazoustojchivogo-veb-servera-na-baze-nginx-i-apache\/","title":{"rendered":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0433\u043e \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u0431\u0430\u0437\u0435 nginx \u0438 apache."},"content":{"rendered":"<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0445\u00a0\u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432.<br \/>\n\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c nginx \u0434\u043b\u044f \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u0430 \u0441\u0432\u044f\u0437\u043a\u0443 nginx + apache \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<!--more--><\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0434\u0430\u043d\u043d\u0443\u044e \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435. \u041c\u044b \u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0435 \u0441\u0445\u0435\u043c\u044b \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438, \u044d\u0442\u043e \u0441\u0445\u0435\u043c\u0430 1:<\/p>\n<p><img loading=\"lazy\" class=\"alignnone wp-image-618\" src=\"http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/Nginx_ihkg02.png\" alt=\"\" width=\"604\" height=\"408\" srcset=\"http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/Nginx_ihkg02.png 604w, http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/Nginx_ihkg02-449x304.png 449w\" sizes=\"(max-width: 604px) 100vw, 604px\" \/><\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0445\u0435\u043c\u0435 \u0442\u043e\u0447\u043a\u043e\u0439 \u043e\u0442\u043a\u0430\u0437\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a, \u043d\u043e \u0435\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432, \u0434\u0430\u043d\u043d\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0434\u043e\u0439\u0434\u0435\u0442.<\/p>\n<p>\u0415\u0441\u043b\u0438 \u0432\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u043f\u043e\u043b\u043d\u0430\u044f \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c, \u0442\u043e \u0432\u0430\u043c \u043f\u043e\u0434\u043e\u0439\u0434\u0435\u0442 \u0432\u0442\u043e\u0440\u0430\u044f \u0441\u0445\u0435\u043c\u0430:<\/p>\n<p><img loading=\"lazy\" class=\"alignnone wp-image-619\" src=\"http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/Nginx_All_b5j2s8.png\" alt=\"\" width=\"596\" height=\"646\" \/><\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0445\u0435\u043c\u0435 \u0437\u0430\u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d \u043a\u0430\u0436\u0434\u044b\u0439 \u0443\u0437\u0435\u043b.<\/p>\n<p>\u0412 \u0440\u0430\u043c\u043a\u0430\u0445 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0438 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0441\u0445\u0435\u043c\u044b \u21161, \u043a\u0430\u043a \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443 2 \u044f \u0440\u0430\u0441\u0441\u043a\u0430\u0436\u0443 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0441\u0442\u0430\u0442\u044c\u0438.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0441\u0445\u0435\u043c\u0443 1.<\/p>\n<p>\u041d\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f:<\/p>\n<p>1) \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c DNS \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u0438\u043f\u0430 A \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 Nginx<\/p>\n<p>2) \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0443 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 nginx<\/p>\n<p>3) \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u0441\u0432\u044f\u0437\u043a\u0435 Nginx + Apache, \u0433\u0434\u0435 Nginx \u043e\u0442\u0434\u0430\u0435\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442, \u0430 Apache \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439<\/p>\n<p>4) \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044e Mysql (\u0442\u0438\u043f Master-Master)<\/p>\n<p>5) \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0443\u044e \u0444\u0430\u0439\u043b\u043e\u0432\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443 GlusterFS \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0430\u0439\u0442\u043e\u0432<\/p>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043f\u0443\u043d\u043a\u0442\u0443 2, \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u043d\u0430 \u0431\u0430\u0437\u0435 Nginx.<\/p>\n<p>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u0432\u0441\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get update<\/pre>\n<pre class=\"lang:default decode:true\">apt-get upgrade<\/pre>\n<p>\u0423\u0434\u0430\u043b\u0438\u043c \u043a\u044d\u0448 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0438 \u043d\u0435\u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get clean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoclean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoremove<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 Nginx.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install nginx<\/pre>\n<p>\u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0438.<\/p>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-available\/*<\/pre>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-enabled\/*<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430.<\/p>\n<pre class=\"lang:default decode:true\">touch \/etc\/nginx\/sites-available\/newsite<\/pre>\n<p>\u041f\u0440\u0438\u0432\u043e\u0434\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433 \u043a \u0432\u0438\u0434\u0443:<\/p>\n<pre class=\"lang:default decode:true\">upstream http {\r\nip_hash;\r\nserver 192.168.10.10:80 max_fails=2 fail_timeout=2s;\r\nserver 192.168.10.20:80 max_fails=2 fail_timeout=2s;\r\nserver 192.168.10.30:80 max_fails=2 fail_timeout=2s;\r\n}\r\n\r\nserver {\r\n\r\nserver_name newsite.test.com;\r\nlisten 80;\r\n\r\nlocation \/ {\r\nproxy_read_timeout 1200;\r\nproxy_connect_timeout 1200;\r\nproxy_pass http:\/\/http\/;\r\nproxy_set_header Host $host;\r\nproxy_set_header X-Real-IP $remote_addr;\r\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n}\r\n}<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435:<\/p>\n<p>\u0412 \u0441\u0435\u043a\u0446\u0438\u0438 <strong>upstream http<\/strong> \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0438 \u0438 \u0430\u0434\u0440\u0435\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430<\/p>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <strong>max_fails<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c<\/p>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <strong>fail_timeout<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u0438 \u043e\u0431\u0440\u044b\u0432\u0435 \u0441\u0432\u044f\u0437\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c<\/p>\n<p>\u0412 \u0441\u0435\u043a\u0446\u0438\u0438 <strong>server<\/strong> \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0430\u0434\u0440\u0435\u0441 \u0441\u0430\u0439\u0442\u0430 \u0438 \u043f\u043e\u0440\u0442 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u0430\u0439\u0442<\/p>\n<p>\u0412 \u0441\u0435\u043a\u0446\u0438\u0438 <strong>location<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u043e\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <strong>proxy_pass<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u0430\u043a\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0443 \u0438\u0437 \u043a\u043e\u043d\u0444\u0438\u0433\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c.<\/p>\n<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0435 \u0445\u043e\u0441\u0442 https , \u0442\u043e \u043a\u043e\u043d\u0444\u0438\u0433 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true\">upstream https {\r\n\r\nserver 192.168.10.10:80 max_fails=2 fail_timeout=2s;\r\nserver 192.168.10.20:80 max_fails=2 fail_timeout=2s;\r\nserver 192.168.10.30:80 max_fails=2 fail_timeout=2s;\r\n}\r\n\r\nserver {\r\n\r\nserver_name newsite.test.com;\r\nlisten 443;\r\nssl on;\r\nssl_certificate \/etc\/nginx\/SSL\/hostname.pem;\r\nssl_certificate_key \/etc\/nginx\/SSL\/server.key;\r\n\r\nlocation \/ {\r\nproxy_read_timeout 1200;\r\nproxy_connect_timeout 1200;\r\nproxy_pass http:\/\/http\/;\r\nproxy_set_header Host $host;\r\nproxy_set_header X-Real-IP $remote_addr;\r\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\nproxy_set_header HTTPS on;\r\n}\r\n}<\/pre>\n<p><!-- Home ittraveler --><br \/>\n<ins class=\"adsbygoogle\" data-ad-client=\"ca-pub-1890562251101921\" data-ad-slot=\"9117958896\" data-ad-format=\"auto\"><\/ins><\/p>\n<p>(adsbygoogle = window.adsbygoogle || []).push({});<\/p>\n<p>\u0412 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 ssl \u0441\u0435\u0441\u0441\u0438\u0438 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u043d\u0438\u043c\u0430\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a, \u0430 \u043d\u0435 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440.<\/p>\n<p>\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0441\u0430\u0439\u0442 (\u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u0444\u0438\u0433 \u0431\u0435\u0437 ssl).<\/p>\n<pre class=\"lang:default decode:true\">ln -s \/etc\/nginx\/sites-available\/newsite \/etc\/nginx\/sites-enabled\/newsite<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c Nginx.<\/p>\n<pre class=\"lang:default decode:true\">service nginx restart<\/pre>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430.<\/p>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0432\u0435\u0431\u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u043e\u043c\u0435\u0440 1.<\/p>\n<p>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u0432\u0441\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get update<\/pre>\n<pre class=\"lang:default decode:true\">apt-get upgrade<\/pre>\n<p>\u0423\u0434\u0430\u043b\u0438\u043c \u043a\u044d\u0448 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0438 \u043d\u0435\u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get clean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoclean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoremove<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441.<\/p>\n<pre class=\"lang:default decode:true\">dpkg-reconfigure tzdata<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c NTP.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install ntp<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 Apache2.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install apache2<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c PHP.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install php5 libapache2-mod-php5 php5-mysql<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Mysql \u0441\u0435\u0440\u0432\u0435\u0440.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install mysql-server mysql-client<\/pre>\n<p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c Mysql.<\/p>\n<pre class=\"lang:default decode:true\">mysql_secure_installation<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f firewall.<\/p>\n<pre class=\"lang:default decode:true\">ufw allow OpenSSH<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow Apache<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 3306\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw limit OpenSSH<\/pre>\n<pre class=\"lang:default decode:true\">ufw enable<\/pre>\n<p>\u0422.\u043a. Apache \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0448\u0438\u043c backend, \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u0435\u0433\u043e \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430 localhost.<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/apache2\/ports.conf<\/strong><\/p>\n<p>\u0418 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0443 <strong>Listen<\/strong>, \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true\">Listen 127.0.0.1:80<\/pre>\n<p>\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043c\u043e\u0434\u0443\u043b\u0438 Apache2.<\/p>\n<pre class=\"lang:default decode:true\">a2enmod rewrite<\/pre>\n<pre class=\"lang:default decode:true\">a2enmod ssl<\/pre>\n<p>\u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f ip \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0432 \u043b\u043e\u0433\u0430\u0445 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u043c\u043e\u0434\u0443\u043b\u044c rpaf.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install libapache2-mod-rpaf<\/pre>\n<pre class=\"lang:default decode:true\">a2enmod rpaf<\/pre>\n<p>\u0422\u0430\u043a \u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u0438\u0448\u043d\u0438\u0435 \u043c\u043e\u0434\u0443\u043b\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u043e\u0442 \u0442\u0430\u043a \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0443\u043b\u044c status.<\/p>\n<pre class=\"lang:default decode:true\">a2dismod status<\/pre>\n<p>\u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0435 \u0441\u0430\u0439\u0442\u044b.<\/p>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/apache2\/sites-available\/*.*<\/pre>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/apache2\/sites-enabled\/*.*<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c Apache2.<\/p>\n<pre class=\"lang:default decode:true\">service apache2 restart<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c Nginx, \u043e\u043d \u0431\u0443\u0434\u0435\u0442 frontend.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install nginx<\/pre>\n<p>\u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0438.<\/p>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-available\/*<\/pre>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-enabled\/*<\/pre>\n<p>\u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 GlusterFS.<\/p>\n<p>\u0414\u0430\u043d\u043d\u0430\u044f \u0444\u0441 \u043d\u0443\u0436\u043d\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 \u0441\u0430\u0439\u0442\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c\u0438.<\/p>\n<p>\u041d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0438\u0437 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 Firewall.<\/p>\n<pre class=\"lang:default decode:true\">ufw allow 24007:24010\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 49152:49153\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 38465:38467\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 111\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 111\/udp<\/pre>\n<p>\u041d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0438\u0437 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/hosts<\/strong> \u0438 \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c \u043f\u043e\u043b\u043d\u044b\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432.<\/p>\n<p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true\">127.0.0.1 localhost hostname\r\n127.0.0.1 webserver1.test.com webserver1\r\nsecond_ip webserver2.test.com webserver2<\/pre>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0438\u043c\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0438\u0434\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 127.0.0.1, dns \u0438\u043c\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0435\u0433\u043e \u0432\u043d\u0435\u0448\u043d\u0438\u0439 ip.<\/p>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Gluster FS (\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0438\u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432).<\/p>\n<pre class=\"lang:default decode:true\">apt-get install glusterfs-server<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443.<\/p>\n<pre class=\"lang:default decode:true\">gluster peer probe webserver2.test.com<\/pre>\n<p>\u0413\u0434\u0435 <strong>webserver2.test.com<\/strong>, dns \u0438\u043c\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<\/p>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u043b\u0438\u0441\u044c \u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440.<\/p>\n<pre class=\"lang:default decode:true\">gluster peer status<\/pre>\n<p>\u041a\u0430\u043a \u0432\u0438\u0434\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435.<\/p>\n<pre class=\"lang:default decode:true\">State: Peer in Cluster (Connected)<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c volume1,<\/p>\n<pre class=\"lang:default decode:true\">gluster volume create volume1 replica 2 transport tcp webserver1.test.com:\/gluster-storage webserver2.test.com:\/gluster-storage force<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u0435:<\/p>\n<p><strong>volume1<\/strong> &#8212; \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430<\/p>\n<p><strong>replica 2<\/strong> &#8212; \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0440\u0435\u043f\u043b\u0438\u043a<\/p>\n<p><strong>webserver1.test.com:\/gluster-storage<\/strong> -\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 <strong>webserver1.test.com<\/strong> \u0438\u043c\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 gluster, \u0430 <strong>\/gluster-storage<\/strong> \u043f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0444\u0441 Gluster<\/p>\n<p>\u0412\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u043d\u0435 \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true\">volume create: volume1: success: please start the volume to access data<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435.<\/p>\n<pre class=\"lang:default decode:true\">gluster volume start volume1<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true\">volume start: volume1: success<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0447\u0430\u0441\u0442\u044c, \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0439 \u0444\u0441.<\/p>\n<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435:<\/p>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install glusterfs-client<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0434\u043b\u044f \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f (\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/storage-pool<\/pre>\n<p>\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/fstab<\/strong> \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0432 \u043d\u0435\u0433\u043e \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435):<\/p>\n<pre class=\"lang:default decode:true\">webserver1:\/volume1 \/storage-pool glusterfs defaults,_netdev,backupvolfile-server=webserver2 0 0<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:<\/p>\n<p><strong>webserver1:\/volume1<\/strong> &#8212; \u0410\u0434\u0440\u0435\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0438\u0434\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 (\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0435\u0431\u044f) \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430.<\/p>\n<p><strong>\/storage-pool<\/strong> &#8212; \u043f\u0430\u043f\u043a\u0430, \u043a\u0443\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0444\u0441.<\/p>\n<p><strong>backupvolfile-server<\/strong> &#8212; \u0430\u0434\u0440\u0435\u0441 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<br \/>\n\u041c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u0449\u0435\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435(\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true\">mount \/storage-pool<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u0441\u043f\u0438\u0441\u043e\u043a ip, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435.<\/p>\n<p>\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true\">gluster volume set volume1 auth.allow gluster_client1_ip,gluster_client2_ip<\/pre>\n<p>\u0413\u0434\u0435 \u0432\u043c\u0435\u0441\u0442\u043e gluster_client1_ip,gluster_client2_ip \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f ip \u0430\u0434\u0440\u0435\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432.<br \/>\n\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0430\u043f\u043a\u0443 \u0441 \u0441\u0430\u0439\u0442\u0430\u043c\u0438.<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/storage-pool\/hosting<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043e\u0442\u043a\u0440\u043e\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u0430\u043f\u043a\u0435 \u0441 \u0441\u0430\u0439\u0442\u0430\u043c\u0438, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b \/etc\/apache2\/apache2.conf \u0438 \u0432\u043d\u043e\u0441\u0438\u043c \u0432 \u043d\u0435\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 (\u0414\u0435\u043b\u0430\u0435\u043c \u044d\u0442\u043e \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435):<\/p>\n<pre class=\"lang:default decode:true\">&lt;Directory \/storage-pool\/hosting&gt;\r\nOptions FollowSymLinks\r\nAllowOverride all\r\nRequire all granted\r\n&lt;\/Directory&gt;<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430. (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435)<\/p>\n<pre class=\"lang:default decode:true\">touch \/etc\/apache2\/sites-available\/newsite.conf<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0432 \u0432\u0432\u043e\u0434\u0438\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:<\/p>\n<pre class=\"lang:default decode:true\">&lt;VirtualHost *:80&gt;\r\nServerName newsite.test.com\r\nDocumentRoot \/storage-pool\/hosting\/newsite\r\nCustomLog \/var\/log\/apache2\/newsite.access.log combined\r\nErrorLog \/var\/log\/apache2\/newsite.error.log\r\n&lt;\/VirtualHost&gt;<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435:<\/p>\n<p>\u0421\u0430\u0439\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 <strong>80<\/strong>-\u043c \u043f\u043e\u0440\u0442\u0443<\/p>\n<p>\u0421\u0430\u0439\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e DNS \u0430\u0434\u0440\u0435\u0441\u0430\u043c <strong>newsite.test.com<\/strong><\/p>\n<p>\u0421\u0430\u0439\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u2013 <strong>\/storage-pool\/hosting\/newsite<\/strong><\/p>\n<p>&nbsp;<\/p>\n<p><!-- Home ittraveler --><br \/>\n<ins class=\"adsbygoogle\" data-ad-client=\"ca-pub-1890562251101921\" data-ad-slot=\"9117958896\" data-ad-format=\"auto\"><\/ins><\/p>\n<p>(adsbygoogle = window.adsbygoogle || []).push({});<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0441 \u043d\u043e\u0432\u044b\u043c \u0441\u0430\u0439\u0442\u043e\u043c.<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/storage-pool\/hosting\/newsite<\/pre>\n<p>\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0441\u0430\u0439\u0442 (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435):<\/p>\n<pre class=\"lang:default decode:true\">a2ensite newsite.conf<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0438 apache2 (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true\">service apache2 reload<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0441\u0430\u0439\u0442\u0430 newsite \u0434\u043b\u044f Nginx (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true \">touch \/etc\/nginx\/sites-available\/newsite.conf<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0432 \u0432\u0432\u043e\u0434\u0438\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:<\/p>\n<pre class=\"lang:default decode:true \">server {\r\nlisten ip_adress:80;\r\nserver_name newsite.test.com;\r\ncharset utf-8;\r\naccess_log off;\r\nerror_log \/var\/log\/nginx\/site.error.log;\r\n\r\nlocation ~* \\.(txt|jpg|jpeg|gif|png|bmp|swf|ico|css|js)$ {\r\nroot \/storage-pool\/hosting\/newsite;\r\nexpires 7d;\r\n}\r\n\r\nlocation ~ \/\\.ht {\r\ndeny all;\r\n}\r\n\r\nlocation \/ {\r\nroot \/storage-pool\/hosting\/newsite;\r\nproxy_set_header Host $host;\r\nproxy_set_header X-Forwarded-For $remote_addr;\r\nproxy_pass http:\/\/127.0.0.1\/;\r\nproxy_set_header Accept-Encoding \"\";\r\n}\r\n}<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435:<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>listen ip_adress:80<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u0442\u0443 \u0438 ip \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u0430\u0439\u0442<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>root<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0441\u0430\u0439\u0442\u0430<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>server_name<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 dns \u0438\u043c\u044f \u0441\u0430\u0439\u0442\u0430<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430:<\/p>\n<pre class=\"lang:default decode:true\">location ~* \\.(txt|jpg|jpeg|gif|png|bmp|swf|ico|css|js<\/pre>\n<p>\u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0442\u0438\u043f \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432.<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>expires<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442.<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430:<\/p>\n<pre class=\"lang:default decode:true\">location ~ \/\\.ht {\r\ndeny all;<\/pre>\n<p>\u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 Nginx \u043e\u0442\u0434\u0430\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0441 .ht<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430:<\/p>\n<pre class=\"lang:default decode:true\">proxy_set_header Host $host;\r\nproxy_set_header X-Forwarded-For $remote_addr;\r\nproxy_pass http:\/\/127.0.0.1\/;\r\nproxy_set_header Accept-Encoding \"\";<\/pre>\n<p>\u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0447\u0442\u043e Nginx \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u043a\u0441\u0438 \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 localhost.<\/p>\n<p>&nbsp;<\/p>\n<p>\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0441\u0430\u0439\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439. (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true\">ln -s \/etc\/nginx\/sites-available\/newsite.conf \/etc\/nginx\/sites-enabled\/newsite.conf<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c Nginx. (\u0414\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435).<\/p>\n<pre class=\"lang:default decode:true\">service nginx restart<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c CMS WordPress.<\/p>\n<p>\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e WordPress.<\/p>\n<pre class=\"lang:default decode:true\">wget http:\/\/wordpress.org\/latest.tar.gz\r\n<\/pre>\n<p>\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u0443\u0435\u043c \u0430\u0440\u0445\u0438\u0432 \u0441 CMS.<\/p>\n<pre class=\"lang:default decode:true\">tar -xzvf latest.tar.gz<\/pre>\n<p>\u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0441\u0430\u0439\u0442.<\/p>\n<pre class=\"lang:default decode:true\">cp -r ~\/wordpress\/* \/storage-pool\/hosting\/newsite<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 Mysql \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438.<\/p>\n<p>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/mysql\/my.cnf.<\/strong><\/p>\n<p>\u0418\u0437\u043c\u0435\u043d\u044f\u0435\u043c \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438:<\/p>\n<pre class=\"lang:default decode:true\">server-id = 1\r\nlog_bin = \/var\/log\/mysql\/mysql-bin.log\r\nbinlog_do_db = example_DB\r\n# bind-address = 127.0.0.1<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435:<\/p>\n<p><strong>server-id<\/strong> \u2013 \u043d\u043e\u043c\u0435\u0440 id mysql \u0441\u0435\u0440\u0432\u0435\u0440\u0430<\/p>\n<p><strong>log_bin<\/strong> \u2013 \u043f\u0443\u0442\u044c \u043a \u0431\u0438\u043d\u0430\u0440\u043d\u043e\u043c\u0443 \u043b\u043e\u0433\u0443, \u0432 \u043d\u0435\u0433\u043e \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f<\/p>\n<p><strong>binlog_do_db<\/strong> \u2013 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0411\u0414, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c<\/p>\n<p><strong># bind-address<\/strong> \u2013 \u0441\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u043a\u043e\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430, \u0442.\u043a. \u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 localhost<\/p>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c mysql \u0441\u0435\u0440\u0432\u0435\u0440.<\/p>\n<pre class=\"lang:default decode:true\">service mysql restart<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438.<\/p>\n<p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a Mysql.<\/p>\n<pre class=\"lang:default decode:true\">mysql -u root -p<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f replicator.<\/p>\n<pre class=\"lang:default decode:true\">create user 'replicator'@'%' identified by 'password';<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c.<\/p>\n<pre class=\"lang:default decode:true\">create database example_DB;<\/pre>\n<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u043c \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e.<\/p>\n<pre class=\"lang:default decode:true\">grant replication slave on *.* to 'replicator'@'%';<\/pre>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true\">show master status;<\/pre>\n<p>\u0417\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b <strong>File<\/strong> (mysql-bin.000001) \u0438 <strong>Position<\/strong> (107). \u042d\u0442\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043d\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0435.<\/p>\n<p>\u041e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043e\u0442 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 mysql.<\/p>\n<pre class=\"lang:default decode:true\">exit<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u043f\u0440\u0430\u0432\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0444\u0430\u0439\u043b <strong>\/etc\/mysql\/my.cnf<\/strong><\/p>\n<p>\u041a\u043e\u043d\u0444\u0438\u0433 \u0444\u0430\u0439\u043b \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e id.<\/p>\n<pre class=\"lang:default decode:true\">server-id = 2\r\nlog_bin = \/var\/log\/mysql\/mysql-bin.log\r\nbinlog_do_db = example_DB\r\n# bind-address = 127.0.0.1<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c mysql \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435.<\/p>\n<pre class=\"lang:default decode:true\">service mysql restart<\/pre>\n<p>\u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.<\/p>\n<pre class=\"lang:default decode:true\">mysql -u root -p<\/pre>\n<pre class=\"lang:default decode:true\">create user 'replicator'@'%' identified by 'password';<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c.<\/p>\n<pre class=\"lang:default decode:true\">create database example_DB;<\/pre>\n<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u043c \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e.<\/p>\n<pre class=\"lang:default decode:true\">grant replication slave on *.* to 'replicator'@'%';<\/pre>\n<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438.<\/p>\n<pre class=\"lang:default decode:true\">slave stop;<\/pre>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b <strong>MASTER_LOG_FILE<\/strong> \u0438 <strong>MASTER_LOG_POS<\/strong> \u0431\u0435\u0440\u0435\u043c \u0441 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 (\u0432\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b show master status;).<\/p>\n<pre class=\"lang:default decode:true\">CHANGE MASTER TO MASTER_HOST = 'ip address first mysql server', MASTER_USER = 'replicator', MASTER_PASSWORD = 'password', MASTER_LOG_FILE = 'mysql-bin.000001', MASTER_LOG_POS = 107;<\/pre>\n<pre class=\"lang:default decode:true\">slave start;<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0441\u0442\u0430\u0442\u0443\u0441 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438:<\/p>\n<pre class=\"lang:default decode:true\">SHOW MASTER STATUS;<\/pre>\n<pre class=\"lang:default decode:true \">+------------------+----------+--------------+------------------+\r\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |\r\n+------------------+----------+--------------+------------------+\r\n| mysql-bin.000004 | 107      | example_DB   |                  |\r\n+------------------+----------+--------------+------------------+\r\n1 row in set (0.00 sec)<\/pre>\n<p>&nbsp;<\/p>\n<p><!-- Home ittraveler --><br \/>\n<ins class=\"adsbygoogle\" data-ad-client=\"ca-pub-1890562251101921\" data-ad-slot=\"9117958896\" data-ad-format=\"auto\"><\/ins><\/p>\n<p>(adsbygoogle = window.adsbygoogle || []).push({});<\/p>\n<p>\u0417\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u043e\u0437\u0438\u0446\u0438\u0438, \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u043d\u0430\u043c \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u043c \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044e \u043d\u0430 \u043d\u0435\u043c:<\/p>\n<pre class=\"lang:default decode:true\">slave stop;<\/pre>\n<p>\u041c\u0435\u043d\u044f\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b <strong>MASTER_LOG_FILE<\/strong> \u0438 <strong>MASTER_LOG_POS<\/strong> \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u043d\u0435\u0435 \u0438\u0437 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <strong>SHOW MASTER STATUS;<\/strong><\/p>\n<pre class=\"lang:default decode:true\">CHANGE MASTER TO MASTER_HOST = 'ip address second mysql server', MASTER_USER = 'replicator', MASTER_PASSWORD = 'password', MASTER_LOG_FILE = 'mysql-bin.000004', MASTER_LOG_POS = 107;<\/pre>\n<pre class=\"lang:default decode:true\">slave start;<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0434\u0432\u0443\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445.<\/p>\n<p>\u041e\u0442\u043a\u0440\u043e\u0435\u043c \u043a\u043e\u043d\u0441\u043e\u043b\u044c mysql \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u044b:<\/p>\n<pre class=\"lang:default decode:true\">mysql -u root -p<\/pre>\n<pre class=\"lang:default decode:true\">CREATE USER wordpressuser@localhost;<\/pre>\n<pre class=\"lang:default decode:true\">SET PASSWORD FOR wordpressuser@localhost= PASSWORD(\"password\");<\/pre>\n<pre class=\"lang:default decode:true\">GRANT ALL PRIVILEGES ON example_DB.* TO wordpressuser@localhost IDENTIFIED BY 'password';<\/pre>\n<pre class=\"lang:default decode:true\">FLUSH PRIVILEGES;<\/pre>\n<pre class=\"lang:default decode:true\">exit<\/pre>\n<p>\u0414\u0430\u043d\u043d\u044b\u043c\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438 \u043c\u044b \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f mysql \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438\u0437 CMS WordPress \u043a \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 <strong>example_DB.<\/strong><\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c CSM WordPress \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445.<\/p>\n<p>\u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 WordPress.<\/p>\n<pre class=\"lang:default decode:true\">cp \/storage-pool\/hosting\/newsite\/wp-config-sample.php \/storage-pool\/hosting\/newsite\/wp-config.php<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>wp-config.php<\/strong> \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:<\/p>\n<pre class=\"lang:default decode:true\">\/\/ ** MySQL settings - You can get this info from your web host ** \/\/\r\n\/** The name of the database for WordPress *\/\r\ndefine('DB_NAME', 'example_DB');\r\n\/** MySQL database username *\/\r\ndefine('DB_USER', 'wordpressuser');\r\n\/** MySQL database password *\/\r\ndefine('DB_PASSWORD', 'password');<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u043f\u0430\u043f\u043a\u0443 \u0441 \u0441\u0430\u0439\u0442\u0430\u043c\u0438.<\/p>\n<pre class=\"lang:default decode:true\">chown -R www-data \/storage-pool\/hosting\/<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c CSM wordpress \u0441\u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445.<\/p>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0445\u0435\u043c\u044b \u21161 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430. \u041f\u0440\u0438 \u043f\u0430\u0434\u0435\u043d\u0438\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0441\u0430\u0439\u0442 <strong>http:\/\/newsite.test.com<\/strong> \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0442\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c.<\/p>\n<p>\u0414\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0445\u0435\u043c\u044b \u21162 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a Nginx \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432 DNS \u0434\u0432\u0435 A \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0430\u0439\u0442\u0430, \u043a\u0430\u0436\u0434\u0430\u044f \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 ip \u0430\u0434\u0440\u0435\u0441 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u043e\u0432.<\/p>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0433\u043e \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430) \u0423\u0434\u0430\u0447\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438)<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0445\u00a0\u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432. \u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c nginx \u0434\u043b\u044f \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u0430 \u0441\u0432\u044f\u0437\u043a\u0443 nginx + apache \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,7,11,54],"tags":[76,74,101,86,100],"aioseo_notices":[],"_links":{"self":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/616"}],"collection":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=616"}],"version-history":[{"count":8,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/616\/revisions"}],"predecessor-version":[{"id":1331,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/616\/revisions\/1331"}],"wp:attachment":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=616"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=616"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=616"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}