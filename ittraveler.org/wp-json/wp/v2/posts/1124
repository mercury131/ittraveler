{"id":1124,"date":"2018-07-27T13:23:29","date_gmt":"2018-07-27T10:23:29","guid":{"rendered":"http:\/\/ittraveler.org\/?p=1124"},"modified":"2018-07-27T13:23:29","modified_gmt":"2018-07-27T10:23:29","slug":"ustanovka-i-nastrojka-ansible","status":"publish","type":"post","link":"http:\/\/ittraveler.org\/ustanovka-i-nastrojka-ansible\/","title":{"rendered":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Ansible"},"content":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ansible \u043d\u0430 Ubuntu server 18.04 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c playbook \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043d\u0430 Windows \u0438 Ubuntu \u0445\u043e\u0441\u0442\u044b.<br \/>\n\u0422\u0430\u043a\u0436\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u0430\u043a \u043f\u043e\u0434\u043d\u044f\u0442\u044c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 \u0441 nginx,php7,mysql \u0438 \u043f\u043e\u0434\u043d\u044f\u0442\u044c \u0440\u043e\u043b\u0438 iis, fileserver \u043d\u0430 Windows \u0445\u043e\u0441\u0442\u0430\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e playbook Ansible.<!--more--><\/p>\n<p>\u041f\u043e\u0435\u0445\u0430\u043b\u0438!<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u043a\u043b\u044e\u0447 \u043e\u0442 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f Ansible<\/p>\n<pre class=\"lang:default decode:true \">apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 93C4A3FD7BB9C367<\/pre>\n<p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u0441\u0430\u043c \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439<\/p>\n<pre class=\"lang:default decode:true \">apt-add-repository \"deb http:\/\/ppa.launchpad.net\/ansible\/ansible\/ubuntu bionic main\"<\/pre>\n<p>\u041e\u0431\u043d\u043e\u0432\u0438\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c Ansible<\/p>\n<pre class=\"lang:default decode:true \">apt-get update &amp;&amp; apt-get install ansible<\/pre>\n<p>Ansible \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 ssh \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a Linux \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c.<\/p>\n<p>\u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u044e\u0447 ssh \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 Ansible<\/p>\n<pre class=\"lang:default decode:true \">ssh-keygen -t rsa -b 4096<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043d\u0443\u0436\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u044e\u0447 \u043a\u043e\u0434\u0430\u043d\u0434\u043e\u0439 \u043d\u0438\u0436\u0435, \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 Ansible<\/p>\n<pre class=\"lang:default decode:true \">ssh-copy-id root@test-ubuntu1<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 root \u043d\u0430 \u0441\u0432\u043e\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 test-ubuntu1 \u043d\u0430 hostname \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430<\/p>\n<p>Ansible \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 python \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f linux \u0445\u043e\u0441\u0442\u0430\u043c\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u044e\u0447\u0438\u043c\u0441\u044f \u043a \u043a\u0430\u0436\u0434\u043e\u0439 \u043d\u043e\u0434\u0435 \u0441 Ubuntu \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u043d\u0430 \u043d\u0438\u0445 python \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">apt-get update &amp;&amp; apt-get install python python-apt<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 Ansible \u0438 \u043e\u0442\u043a\u0440\u043e\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/ansible\/hosts<\/strong><\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0437\u0430\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u0445\u043e\u0441\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 Ansible.<br \/>\n\u0425\u043e\u0441\u0442\u044b \u0437\u0430\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043f\u043e \u0433\u0440\u0443\u043f\u043f\u0430\u043c.<\/p>\n<p>\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:<\/p>\n<pre class=\"lang:default decode:true \">[servers_ubuntu]\r\ntest-ubuntu1\r\ntest-ubuntu1<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u043c\u043e\u0436\u0435\u043c \u043b\u0438 \u043c\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u043c \u0445\u043e\u0441\u0442\u0430\u043c<\/p>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c ping<\/p>\n<pre class=\"lang:default decode:true \">ansible -m ping all<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">test-ubuntu1 | SUCCESS =&gt; {\r\n    \"changed\": false,\r\n    \"ping\": \"pong\"\r\n}\r\ntest-ubuntu2 | SUCCESS =&gt; {\r\n    \"changed\": false,\r\n    \"ping\": \"pong\"\r\n}<\/pre>\n<p>\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 ping \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:<\/p>\n<pre class=\"lang:default decode:true \">ansible -m ping servers_ubuntu - \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u044b \u043f\u0438\u043d\u0433\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b servers_ubuntu\r\n\r\nansible -m ping test-ubuntu1 - \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u044b \u043f\u0438\u043d\u0433\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0445\u043e\u0441\u0442 test-ubuntu1<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u0441\u0432\u044f\u0437\u044c \u043f\u043e ssh<\/p>\n<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 , \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u044b\u0432\u0435\u0434\u0435\u0442 \u043d\u0430\u043c \u043a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u043d\u0430 \u043d\u0430\u0448\u0438\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0441 Ubuntu<\/p>\n<pre class=\"lang:default decode:true \">ansible -m shell -a 'free -m' servers_ubuntu<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">test-ubuntu2 | SUCCESS | rc=0 &gt;&gt;\r\n              total        used        free      shared  buff\/cache   available\r\nMem:           1993          99        1454           1         440        1742\r\nSwap:          2047           0        2047\r\n\r\ntest-ubuntu1 | SUCCESS | rc=0 &gt;&gt;\r\n              total        used        free      shared  buff\/cache   available\r\nMem:           1993          99        1454           1         439        1742\r\nSwap:          2047           0        2047\r\n<\/pre>\n<p>\u0415\u0441\u043b\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0430\u0441\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0437\u043d\u0430\u0447\u0438\u0442 \u0443 \u043d\u0430\u0441 \u0432\u0441\u0435 \u043e\u043a, \u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e ssh \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442.<\/p>\n<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e Ansible \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043f\u043e ssh \u043f\u043e\u0434 \u0442\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u043f\u043e\u0434 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0432\u044b \u0432 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.<br \/>\n\u0415\u0441\u043b\u0438 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0432\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0435\u0441\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442, \u0438\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0434 \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c, \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0432 Ansible.<\/p>\n<p>\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u043f\u0430\u043f\u043a\u0443 &#8212; \/etc\/ansible\/group_vars \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 \u043d\u0438\u0436\u0435:<\/p>\n<pre class=\"lang:default decode:true \">mkdir \/etc\/ansible\/group_vars<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0432 \u043d\u0435\u0439 \u0444\u0430\u0439\u043b \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u043d\u0430\u0448\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u044b \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432<\/p>\n<pre class=\"lang:default decode:true \">touch \/etc\/ansible\/group_vars\/servers_ubuntu<\/pre>\n<p>\u0438 \u0432\u043d\u0435\u0441\u0435\u043c \u0432 \u043d\u0435\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e, \u0441\u0430\u043c \u0444\u0430\u0439\u043b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 YAML.<\/p>\n<p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:<\/p>\n<pre class=\"lang:default decode:true \">---\r\nansible_ssh_user: root<\/pre>\n<p>\u0412\u043c\u0435\u0441\u0442\u043e root \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.<\/p>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u0441\u0430\u043c\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u043c\u0443, \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 Playbook, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 Ubuntu.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0430\u043f\u043a\u0443 \u0434\u043b\u044f Playbook<\/p>\n<pre class=\"lang:default decode:true \">mkdir -p ~\/ansible\/playbooks<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u043e\u0432\u044b\u0439 Playbook<\/p>\n<pre class=\"lang:default decode:true \">touch ~\/ansible\/playbooks\/update_ubuntu.yml<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>~\/ansible\/playbooks\/update_ubuntu.yml<\/strong> \u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u0435\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:<\/p>\n<pre class=\"lang:default decode:true\">---\r\n- hosts: servers_ubuntu\r\n  tasks:\r\n   - name: updates a server\r\n     apt: update_cache=yes\r\n   - name: upgrade a server\r\n     apt: upgrade=dist\r\n   - name: Check if a reboot is required\r\n     register: file\r\n     stat: path=\/var\/run\/reboot-required get_md5=no\r\n   - name: Reboot the server\r\n     command: \/sbin\/reboot\r\n     when: file.stat.exists == true\r\n<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true\">ansible-playbook --check  ~\/ansible\/playbooks\/update_ubuntu.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_ubuntu] ***********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu2]\r\nok: [test-ubuntu1]\r\n\r\nTASK [updates a server] *********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nTASK [upgrade a server] *********************************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu2]\r\nok: [test-ubuntu1]\r\n\r\nTASK [Check if a reboot is required] ********************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu1]\r\nok: [test-ubuntu2]\r\n\r\nTASK [Reboot the server] ********************************************************************************************************************************************************************************************************************\r\nskipping: [test-ubuntu1]\r\nskipping: [test-ubuntu2]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ubuntu1               : ok=4    changed=1    unreachable=0    failed=0\r\ntest-ubuntu2               : ok=4    changed=1    unreachable=0    failed=0<\/pre>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook ~\/ansible\/playbooks\/update_ubuntu.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_ubuntu] ***********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu2]\r\nok: [test-ubuntu1]\r\n\r\nTASK [updates a server] *********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [upgrade a server] *********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nTASK [Check if a reboot is required] ********************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu1]\r\nok: [test-ubuntu2]\r\n\r\nTASK [Reboot the server] ********************************************************************************************************************************************************************************************************************\r\nfatal: [test-ubuntu2]: UNREACHABLE! =&gt; {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: Shared connection to test-ubuntu2 closed.\\r\\n\", \"unreachable\": true}\r\nfatal: [test-ubuntu1]: UNREACHABLE! =&gt; {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: Shared connection to test-ubuntu1 closed.\\r\\n\", \"unreachable\": true}\r\n        to retry, use: --limit @\/root\/ansible\/playbooks\/update_ubuntu.retry\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ubuntu1               : ok=4    changed=2    unreachable=1    failed=0\r\ntest-ubuntu2               : ok=4    changed=2    unreachable=1    failed=0<\/pre>\n<p>\u0421\u0435\u0440\u0432\u0435\u0440\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c.<br \/>\n\u0421\u0442\u0440\u043e\u043a\u0443 fatal: [test-ubuntu2]: UNREACHABLE! \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0438\u0437-\u0437\u0430 \u0442\u043e\u0433\u043e \u0447\u0442\u043e Ansible \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 , \u0442.\u043a. \u0432 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438 Playbook \u043c\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0435\u0441\u0442\u044c \u043b\u0438 \u0445\u043e\u0441\u0442\u0430\u0445 \u0444\u0430\u0439\u043b \/var\/run\/reboot-required<\/p>\n<p>\u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 Playbook:<\/p>\n<pre class=\"lang:default decode:true \">---\r\n- hosts: servers_ubuntu\r\n  tasks:\r\n    - name: Run the equivalent of apt-get update\r\n      apt:\r\n        update_cache: yes\r\n\r\n    - name: Update all packages to the latest version\r\n      apt:\r\n        upgrade: dist<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0442\u0443\u0442 \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 apt , \u043e\u043d \u0442\u043e\u0436\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439.<br \/>\n\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0442\u0443\u0442 &#8212; <a href=\"https:\/\/docs.ansible.com\/ansible\/latest\/modules\/apt_module.html#examples\">https:\/\/docs.ansible.com\/ansible\/latest\/modules\/apt_module.html#examples<\/a><\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c Playbook \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0449\u0438\u0439 Nginx, PHP \u0438 Mysql \u043d\u0430 \u043d\u0430\u0448\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441 Ubuntu<\/p>\n<pre class=\"lang:default decode:true \">touch ~\/ansible\/playbooks\/lemp_ubuntu.yml<\/pre>\n<p>\u0421\u0430\u043c Playbook \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true \">---\r\n- hosts: servers_ubuntu\r\n  tasks:\r\n    - name: Run the equivalent of apt-get update\r\n      apt:\r\n        update_cache: yes\r\n\r\n    - name: Install Nginx\r\n      apt:\r\n        name: nginx\r\n        state: latest\r\n\r\n    - name: Install Mysql\r\n      apt:\r\n        name: mysql-server-5.7\r\n        state: latest\r\n\r\n    - name: Install PHP-FPM\r\n      apt:\r\n        name: php-fpm\r\n        state: latest\r\n\r\n    - name: Install PHP-MYSQL\r\n      apt:\r\n        name: php-mysql\r\n        state: latest<\/pre>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook --check   ~\/ansible\/playbooks\/lemp_ubuntu.yml<\/pre>\n<pre class=\"lang:default decode:true \">PLAY [servers_ubuntu] ***********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu2]\r\nok: [test-ubuntu1]\r\n\r\nTASK [Run the equivalent of apt-get update] *************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [Install Nginx] ************************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nTASK [Install Mysql] ************************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [Install PHP-FPM] **********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nTASK [Install PHP-MYSQL] ********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ubuntu1               : ok=6    changed=5    unreachable=0    failed=0\r\ntest-ubuntu2               : ok=6    changed=5    unreachable=0    failed=0<\/pre>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook  ~\/ansible\/playbooks\/lemp_ubuntu.yml<\/pre>\n<pre class=\"lang:default decode:true \">PLAY [servers_ubuntu] ***********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ubuntu2]\r\nok: [test-ubuntu1]\r\n\r\nTASK [Run the equivalent of apt-get update] *************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [Install Nginx] ************************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu1]\r\nchanged: [test-ubuntu2]\r\n\r\nTASK [Install Mysql] ************************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [Install PHP-FPM] **********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nTASK [Install PHP-MYSQL] ********************************************************************************************************************************************************************************************************************\r\nchanged: [test-ubuntu2]\r\nchanged: [test-ubuntu1]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ubuntu1               : ok=6    changed=5    unreachable=0    failed=0\r\ntest-ubuntu2               : ok=6    changed=5    unreachable=0    failed=0<\/pre>\n<p>Playbook \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043b, \u0435\u0441\u043b\u0438 \u0437\u0430\u0439\u0442\u0438 \u043d\u0430 \u0445\u043e\u0441\u0442\u044b \u043c\u044b \u0443\u0432\u0438\u0434\u0438\u043c \u0447\u0442\u043e nginx, php \u0438 mysql \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c.<\/p>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Playbook \u0434\u043b\u044f \u0445\u043e\u0441\u0442\u043e\u0432 Ubuntu \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430 \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0445\u043e\u0441\u0442\u043e\u0432 \u043f\u043e\u0434 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c Windows.<\/p>\n<p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Windows \u0445\u043e\u0441\u0442\u0430\u043c\u0438 Ansible \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 Powershell \u0438 winrm , \u0432\u0435\u0440\u0441\u0438\u044f Powershell \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0435 \u043d\u0438\u0436\u0435 3.0 , \u0430 net framework \u043d\u0435 \u043d\u0438\u0436\u0435 4.<\/p>\n<p>\u0414\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f Powershell \u0438 net framework \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u043a\u0440\u0438\u043f\u0442:<\/p>\n<pre class=\"lang:default decode:true \">$url = \"https:\/\/raw.githubusercontent.com\/jborean93\/ansible-windows\/master\/scripts\/Upgrade-PowerShell.ps1\"\r\n$file = \"$env:temp\\Upgrade-PowerShell.ps1\"\r\n$username = \"Administrator\"\r\n$password = \"Password\"\r\n\r\n(New-Object -TypeName System.Net.WebClient).DownloadFile($url, $file)\r\nSet-ExecutionPolicy -ExecutionPolicy Unrestricted -Force\r\n\r\n# version can be 3.0, 4.0 or 5.1\r\n&amp;$file -Version 5.1 -Username $username -Password $password -Verbose\r\n\r\n# this isn't needed but is a good security practice to complete\r\nSet-ExecutionPolicy -ExecutionPolicy Restricted -Force\r\n\r\n$reg_winlogon_path = \"HKLM:\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\"\r\nSet-ItemProperty -Path $reg_winlogon_path -Name AutoAdminLogon -Value 0\r\nRemove-ItemProperty -Path $reg_winlogon_path -Name DefaultUserName -ErrorAction SilentlyContinue\r\nRemove-ItemProperty -Path $reg_winlogon_path -Name DefaultPassword -ErrorAction SilentlyContinue<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438 WINRM<\/p>\n<pre class=\"lang:default decode:true \">$url = \"https:\/\/raw.githubusercontent.com\/ansible\/ansible\/devel\/examples\/scripts\/ConfigureRemotingForAnsible.ps1\"\r\n$file = \"$env:temp\\ConfigureRemotingForAnsible.ps1\"\r\n\r\n(New-Object -TypeName System.Net.WebClient).DownloadFile($url, $file)\r\n\r\npowershell.exe -ExecutionPolicy ByPass -File $file<\/pre>\n<p>\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0438 \u043d\u0430 \u0432\u0430\u0448\u0438\u0445 Windows \u0445\u043e\u0441\u0442\u0430\u0445 \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0441\u0430\u043c\u043e\u0433\u043e Ansible.<\/p>\n<p>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c Ansible \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 python<\/p>\n<pre class=\"lang:default decode:true \">apt-get install python-pip \r\nexport PATH=\"${HOME}\/.local\/bin:$PATH\"\r\npip install pywinrm<\/pre>\n<p>\u041e\u0442\u043a\u0440\u043e\u0435\u043c \u0444\u0430\u0439\u043b \/etc\/ansible\/hosts \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u043c Windows \u0425\u043e\u0441\u0442\u044b.<\/p>\n<pre class=\"lang:default decode:true \">[servers_windows]\r\ntest-ansible\r\ntest-ansible-iis\r\n\r\n[servers_windows:vars]\r\nansible_user=YOUR_ADMIN_USER\r\nansible_password=password\r\nansible_connection=winrm\r\nansible_winrm_server_cert_validation=ignore<\/pre>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0442\u043e \u043a\u0440\u043e\u043c\u0435 \u0441\u0430\u043c\u0438\u0445 \u0445\u043e\u0441\u0442\u043e\u0432 \u0431\u044b\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441 \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438 \u043f\u0430\u0440\u043e\u043b\u0435\u043c \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 ssl \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c ping \u0434\u043e Windows \u0445\u043e\u0441\u0442\u043e\u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">ansible servers_windows -m win_ping<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">ansible servers_windows -m win_ping\r\n\r\ntest-ansible-iis | SUCCESS =&gt; {\r\n    \"changed\": false,\r\n    \"ping\": \"pong\"\r\n}\r\ntest-ansible | SUCCESS =&gt; {\r\n    \"changed\": false,\r\n    \"ping\": \"pong\"\r\n}<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u043e\u0432\u044b\u0439 Playbook, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 Windows \u0445\u043e\u0441\u0442\u044b.<\/p>\n<pre class=\"lang:default decode:true \">touch ~\/ansible\/playbooks\/update_windows.yml<\/pre>\n<p>\u0421\u0430\u043c Playbook \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439:<\/p>\n<pre class=\"lang:default decode:true \">---\r\n- hosts: servers_windows\r\n  tasks:\r\n     - name: Install all security, critical, and rollup updates\r\n       win_updates:\r\n        category_names:\r\n          - SecurityUpdates\r\n          - CriticalUpdates\r\n          - UpdateRollups\r\n        reboot: yes<\/pre>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook --check   ~\/ansible\/playbooks\/update_windows.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_windows] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ansible-iis]\r\nok: [test-ansible]\r\n\r\nTASK [Install all security, critical, and rollup updates] ***********************************************************************************************************************************************************************************\r\nok: [test-ansible-iis]\r\nok: [test-ansible]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ansible               : ok=2    changed=0    unreachable=0    failed=0\r\ntest-ansible-iis           : ok=2    changed=0    unreachable=0    failed=0<\/pre>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook   ~\/ansible\/playbooks\/update_windows.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_windows] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nok: [test-ansible-iis]\r\n\r\nTASK [Install all security, critical, and rollup updates] ***********************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nchanged: [test-ansible-iis]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ansible               : ok=2    changed=0    unreachable=0    failed=0\r\ntest-ansible-iis           : ok=2    changed=1    unreachable=0    failed=0<\/pre>\n<p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 test-ansible-iis , \u0430 \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 test-ansible \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c Playbook \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0440\u043e\u043b\u0438 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 IIS.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">touch ~\/ansible\/playbooks\/install_iis_windows.yml<\/pre>\n<p>\u0421\u0430\u043c Playbook \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f:<\/p>\n<pre class=\"lang:default decode:true \">---\r\n- hosts: servers_windows\r\n  tasks:\r\n     - name: Install IIS Web-Server with  management tools\r\n       win_feature:\r\n        name: Web-Server\r\n        state: present\r\n        include_management_tools: True\r\n       register: win_feature<\/pre>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u043d\u0430\u0448\u0435\u0433\u043e Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook --check ~\/ansible\/playbooks\/install_iis_windows.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_windows] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nok: [test-ansible-iis]\r\n\r\nTASK [Install IIS Web-Server with  management tools] ************************************************************************************************************************************************************************\r\nchanged: [test-ansible]\r\nchanged: [test-ansible-iis]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ansible               : ok=2    changed=1    unreachable=0    failed=0\r\ntest-ansible-iis           : ok=2    changed=1    unreachable=0    failed=0<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">~\/ansible\/playbooks\/install_iis_windows.yml<\/pre>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_windows] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nok: [test-ansible-iis]\r\n\r\nTASK [Install IIS Web-Server with management tools] ************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nchanged: [test-ansible-iis]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ansible               : ok=2    changed=0    unreachable=0    failed=0\r\ntest-ansible-iis           : ok=2    changed=1    unreachable=0    failed=0<\/pre>\n<p>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 test-ansible IIS \u0443\u0436\u0435 \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438\u0441\u044c, \u0430 \u0432\u043e\u0442 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 test-ansible-iis \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0430\u0441\u044c \u0440\u043e\u043b\u044c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 IIS.<\/p>\n<p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e \u043c\u043e\u0434\u0443\u043b\u0435 win_feature \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0442\u0443\u0442 &#8212; <a href=\"https:\/\/docs.ansible.com\/ansible\/2.5\/modules\/win_feature_module.html\">https:\/\/docs.ansible.com\/ansible\/2.5\/modules\/win_feature_module.html<\/a><\/p>\n<p>\u0421\u0430\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0444\u0438\u0447 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c Powershell \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <strong>Get-WindowsFeature<\/strong> , \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0441 Windows.<\/p>\n<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u043f\u0440\u0438\u043c\u0435\u0440, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0440\u043e\u043b\u0438 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0438 ISCSI Target.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">touch ~\/ansible\/playbooks\/install_fileserver_iscsi_target_windows.yml<\/pre>\n<p>\u0421\u0430\u043c Playbook \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439:<\/p>\n<pre class=\"lang:default decode:true \">---\r\n- hosts: servers_windows\r\n  tasks:\r\n     - name: Install File-Server with management tools\r\n       win_feature:\r\n        name: FS-FileServer\r\n        state: present\r\n        include_management_tools: True\r\n       register: win_feature\r\n\r\n     - name: Install ISCSI Target-Server with  management tools\r\n       win_feature:\r\n        name: FS-iSCSITarget-Server\r\n        state: present\r\n        include_management_tools: True\r\n       register: win_feature<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c Playbook<\/p>\n<pre class=\"lang:default decode:true \">ansible-playbook  ~\/ansible\/playbooks\/install_fileserver_iscsi_target_windows.yml<\/pre>\n<p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:<\/p>\n<pre class=\"lang:default decode:true \">PLAY [servers_windows] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************\r\nok: [test-ansible]\r\nok: [test-ansible-iis]\r\n\r\nTASK [Install File-Server with management tools] ********************************************************************************************************************************************************************************************\r\nchanged: [test-ansible-iis]\r\nchanged: [test-ansible]\r\n\r\nTASK [Install ISCSI Target-Server with  management tools] ***********************************************************************************************************************************************************************************\r\nchanged: [test-ansible]\r\nchanged: [test-ansible-iis]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************************************\r\ntest-ansible               : ok=3    changed=2    unreachable=0    failed=0\r\ntest-ansible-iis           : ok=3    changed=2    unreachable=0    failed=0<\/pre>\n<p>\u0420\u043e\u043b\u0438 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0438 ISCSI Target \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<\/p>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0442\u043e \u0440\u043e\u043b\u0438 \u0432 playbook \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0438\u0437 \u0433\u0440\u0430\u0444\u044b <strong>Name<\/strong>, \u043a\u043e\u043c\u0430\u043d\u0434\u044b <strong>Get-WindowsFeature<\/strong>.<\/p>\n<p>\u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b Get-WindowsFeature \u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0440\u043e\u043b\u0435\u0439 \u0438 \u0444\u0438\u0447 Windows Server<\/p>\n<pre class=\"lang:default decode:true \">Display Name                                            Name                       Install State\r\n------------                                            ----                       -------------\r\n[ ] Active Directory Certificate Services               AD-Certificate                 Available\r\n    [ ] Certification Authority                         ADCS-Cert-Authority            Available\r\n    [ ] Certificate Enrollment Policy Web Service       ADCS-Enroll-Web-Pol            Available\r\n    [ ] Certificate Enrollment Web Service              ADCS-Enroll-Web-Svc            Available\r\n    [ ] Certification Authority Web Enrollment          ADCS-Web-Enrollment            Available\r\n    [ ] Network Device Enrollment Service               ADCS-Device-Enrollment         Available\r\n    [ ] Online Responder                                ADCS-Online-Cert               Available\r\n[ ] Active Directory Domain Services                    AD-Domain-Services             Available\r\n[ ] Active Directory Federation Services                ADFS-Federation                Available\r\n[ ] Active Directory Lightweight Directory Services     ADLDS                          Available\r\n[ ] Active Directory Rights Management Services         ADRMS                          Available\r\n    [ ] Active Directory Rights Management Server       ADRMS-Server                   Available\r\n    [ ] Identity Federation Support                     ADRMS-Identity                 Available\r\n[ ] Application Server                                  Application-Server             Available\r\n    [ ] .NET Framework 4.5                              AS-NET-Framework               Available\r\n    [ ] COM+ Network Access                             AS-Ent-Services                Available\r\n    [ ] Distributed Transactions                        AS-Dist-Transaction            Available\r\n        [ ] WS-Atomic Transactions                      AS-WS-Atomic                   Available\r\n        [ ] Incoming Network Transactions               AS-Incoming-Trans              Available\r\n        [ ] Outgoing Network Transactions               AS-Outgoing-Trans              Available\r\n    [ ] TCP Port Sharing                                AS-TCP-Port-Sharing            Available\r\n    [ ] Web Server (IIS) Support                        AS-Web-Support                 Available\r\n    [ ] Windows Process Activation Service Support      AS-WAS-Support                 Available\r\n        [ ] HTTP Activation                             AS-HTTP-Activation             Available\r\n        [ ] Message Queuing Activation                  AS-MSMQ-Activation             Available\r\n        [ ] Named Pipes Activation                      AS-Named-Pipes                 Available\r\n        [ ] TCP Activation                              AS-TCP-Activation              Available\r\n[ ] DHCP Server                                         DHCP                           Available\r\n[ ] DNS Server                                          DNS                            Available\r\n[ ] Fax Server                                          Fax                            Available\r\n[X] File and Storage Services                           FileAndStorage-Services        Installed\r\n    [X] File and iSCSI Services                         File-Services                  Installed\r\n        [X] File Server                                 FS-FileServer                  Installed\r\n        [ ] BranchCache for Network Files               FS-BranchCache                 Available\r\n        [X] Data Deduplication                          FS-Data-Deduplication          Installed\r\n        [ ] DFS Namespaces                              FS-DFS-Namespace               Available\r\n        [ ] DFS Replication                             FS-DFS-Replication             Available\r\n        [ ] File Server Resource Manager                FS-Resource-Manager            Available\r\n        [ ] File Server VSS Agent Service               FS-VSS-Agent                   Available\r\n        [ ] iSCSI Target Server                         FS-iSCSITarget-Server          Available\r\n        [ ] iSCSI Target Storage Provider (VDS and V... iSCSITarget-VSS-VDS            Available\r\n        [ ] Server for NFS                              FS-NFS-Service                 Available\r\n        [ ] Work Folders                                FS-SyncShareService            Available\r\n    [X] Storage Services                                Storage-Services               Installed\r\n[ ] Hyper-V                                             Hyper-V                        Available\r\n[ ] Network Policy and Access Services                  NPAS                           Available\r\n    [ ] Network Policy Server                           NPAS-Policy-Server             Available\r\n    [ ] Health Registration Authority                   NPAS-Health                    Available\r\n    [ ] Host Credential Authorization Protocol          NPAS-Host-Cred                 Available\r\n[ ] Print and Document Services                         Print-Services                 Available\r\n    [ ] Print Server                                    Print-Server                   Available\r\n    [ ] Distributed Scan Server                         Print-Scan-Server              Available\r\n    [ ] Internet Printing                               Print-Internet                 Available\r\n    [ ] LPD Service                                     Print-LPD-Service              Available\r\n[ ] Remote Access                                       RemoteAccess                   Available\r\n    [ ] DirectAccess and VPN (RAS)                      DirectAccess-VPN               Available\r\n    [ ] Routing                                         Routing                        Available\r\n    [ ] Web Application Proxy                           Web-Application-Proxy          Available\r\n[ ] Remote Desktop Services                             Remote-Desktop-Services        Available\r\n    [ ] Remote Desktop Connection Broker                RDS-Connection-Broker          Available\r\n    [ ] Remote Desktop Gateway                          RDS-Gateway                    Available\r\n    [ ] Remote Desktop Licensing                        RDS-Licensing                  Available\r\n    [ ] Remote Desktop Session Host                     RDS-RD-Server                  Available\r\n    [ ] Remote Desktop Virtualization Host              RDS-Virtualization             Available\r\n    [ ] Remote Desktop Web Access                       RDS-Web-Access                 Available\r\n[ ] Volume Activation Services                          VolumeActivation               Available\r\n[ ] Web Server (IIS)                                    Web-Server                     Available\r\n    [ ] Web Server                                      Web-WebServer                  Available\r\n        [ ] Common HTTP Features                        Web-Common-Http                Available\r\n            [ ] Default Document                        Web-Default-Doc                Available\r\n            [ ] Directory Browsing                      Web-Dir-Browsing               Available\r\n            [ ] HTTP Errors                             Web-Http-Errors                Available\r\n            [ ] Static Content                          Web-Static-Content             Available\r\n            [ ] HTTP Redirection                        Web-Http-Redirect              Available\r\n            [ ] WebDAV Publishing                       Web-DAV-Publishing             Available\r\n        [ ] Health and Diagnostics                      Web-Health                     Available\r\n            [ ] HTTP Logging                            Web-Http-Logging               Available\r\n            [ ] Custom Logging                          Web-Custom-Logging             Available\r\n            [ ] Logging Tools                           Web-Log-Libraries              Available\r\n            [ ] ODBC Logging                            Web-ODBC-Logging               Available\r\n            [ ] Request Monitor                         Web-Request-Monitor            Available\r\n            [ ] Tracing                                 Web-Http-Tracing               Available\r\n        [ ] Performance                                 Web-Performance                Available\r\n            [ ] Static Content Compression              Web-Stat-Compression           Available\r\n            [ ] Dynamic Content Compression             Web-Dyn-Compression            Available\r\n        [ ] Security                                    Web-Security                   Available\r\n            [ ] Request Filtering                       Web-Filtering                  Available\r\n            [ ] Basic Authentication                    Web-Basic-Auth                 Available\r\n            [ ] Centralized SSL Certificate Support     Web-CertProvider               Available\r\n            [ ] Client Certificate Mapping Authentic... Web-Client-Auth                Available\r\n            [ ] Digest Authentication                   Web-Digest-Auth                Available\r\n            [ ] IIS Client Certificate Mapping Authe... Web-Cert-Auth                  Available\r\n            [ ] IP and Domain Restrictions              Web-IP-Security                Available\r\n            [ ] URL Authorization                       Web-Url-Auth                   Available\r\n            [ ] Windows Authentication                  Web-Windows-Auth               Available\r\n        [ ] Application Development                     Web-App-Dev                    Available\r\n            [ ] .NET Extensibility 3.5                  Web-Net-Ext                    Available\r\n            [ ] .NET Extensibility 4.5                  Web-Net-Ext45                  Available\r\n            [ ] Application Initialization              Web-AppInit                    Available\r\n            [ ] ASP                                     Web-ASP                        Available\r\n            [ ] ASP.NET 3.5                             Web-Asp-Net                    Available\r\n            [ ] ASP.NET 4.5                             Web-Asp-Net45                  Available\r\n            [ ] CGI                                     Web-CGI                        Available\r\n            [ ] ISAPI Extensions                        Web-ISAPI-Ext                  Available\r\n            [ ] ISAPI Filters                           Web-ISAPI-Filter               Available\r\n            [ ] Server Side Includes                    Web-Includes                   Available\r\n            [ ] WebSocket Protocol                      Web-WebSockets                 Available\r\n    [ ] FTP Server                                      Web-Ftp-Server                 Available\r\n        [ ] FTP Service                                 Web-Ftp-Service                Available\r\n        [ ] FTP Extensibility                           Web-Ftp-Ext                    Available\r\n    [ ] Management Tools                                Web-Mgmt-Tools                 Available\r\n        [ ] IIS Management Console                      Web-Mgmt-Console               Available\r\n        [ ] IIS 6 Management Compatibility              Web-Mgmt-Compat                Available\r\n            [ ] IIS 6 Metabase Compatibility            Web-Metabase                   Available\r\n            [ ] IIS 6 Management Console                Web-Lgcy-Mgmt-Console          Available\r\n            [ ] IIS 6 Scripting Tools                   Web-Lgcy-Scripting             Available\r\n            [ ] IIS 6 WMI Compatibility                 Web-WMI                        Available\r\n        [ ] IIS Management Scripts and Tools            Web-Scripting-Tools            Available\r\n        [ ] Management Service                          Web-Mgmt-Service               Available\r\n[ ] Windows Deployment Services                         WDS                            Available\r\n    [ ] Deployment Server                               WDS-Deployment                 Available\r\n    [ ] Transport Server                                WDS-Transport                  Available\r\n[ ] Windows Server Essentials Experience                ServerEssentialsRole           Available\r\n[ ] Windows Server Update Services                      UpdateServices                 Available\r\n    [ ] WID Database                                    UpdateServices-WidDB           Available\r\n    [ ] WSUS Services                                   UpdateServices-Services        Available\r\n    [ ] Database                                        UpdateServices-DB              Available\r\n[X] .NET Framework 3.5 Features                         NET-Framework-Features         Installed\r\n    [X] .NET Framework 3.5 (includes .NET 2.0 and 3.0)  NET-Framework-Core             Installed\r\n    [ ] HTTP Activation                                 NET-HTTP-Activation            Available\r\n    [ ] Non-HTTP Activation                             NET-Non-HTTP-Activ             Available\r\n[X] .NET Framework 4.5 Features                         NET-Framework-45-Fea...        Installed\r\n    [X] .NET Framework 4.5                              NET-Framework-45-Core          Installed\r\n    [ ] ASP.NET 4.5                                     NET-Framework-45-ASPNET        Available\r\n    [X] WCF Services                                    NET-WCF-Services45             Installed\r\n        [ ] HTTP Activation                             NET-WCF-HTTP-Activat...        Available\r\n        [ ] Message Queuing (MSMQ) Activation           NET-WCF-MSMQ-Activat...        Available\r\n        [ ] Named Pipe Activation                       NET-WCF-Pipe-Activat...        Available\r\n        [ ] TCP Activation                              NET-WCF-TCP-Activati...        Available\r\n        [X] TCP Port Sharing                            NET-WCF-TCP-PortShar...        Installed\r\n[ ] Background Intelligent Transfer Service (BITS)      BITS                           Available\r\n    [ ] IIS Server Extension                            BITS-IIS-Ext                   Available\r\n    [ ] Compact Server                                  BITS-Compact-Server            Available\r\n[ ] BitLocker Drive Encryption                          BitLocker                      Available\r\n[ ] BitLocker Network Unlock                            BitLocker-NetworkUnlock        Available\r\n[ ] BranchCache                                         BranchCache                    Available\r\n[ ] Client for NFS                                      NFS-Client                     Available\r\n[ ] Data Center Bridging                                Data-Center-Bridging           Available\r\n[ ] Direct Play                                         Direct-Play                    Available\r\n[ ] Enhanced Storage                                    EnhancedStorage                Available\r\n[ ] Failover Clustering                                 Failover-Clustering            Available\r\n[X] Group Policy Management                             GPMC                           Installed\r\n[ ] IIS Hostable Web Core                               Web-WHC                        Available\r\n[X] Ink and Handwriting Services                        InkAndHandwritingSer...        Installed\r\n[ ] Internet Printing Client                            Internet-Print-Client          Available\r\n[ ] IP Address Management (IPAM) Server                 IPAM                           Available\r\n[ ] iSNS Server service                                 ISNS                           Available\r\n[ ] LPR Port Monitor                                    LPR-Port-Monitor               Available\r\n[ ] Management OData IIS Extension                      ManagementOdata                Available\r\n[X] Media Foundation                                    Server-Media-Foundation        Installed\r\n[ ] Message Queuing                                     MSMQ                           Available\r\n    [ ] Message Queuing Services                        MSMQ-Services                  Available\r\n        [ ] Message Queuing Server                      MSMQ-Server                    Available\r\n        [ ] Directory Service Integration               MSMQ-Directory                 Available\r\n        [ ] HTTP Support                                MSMQ-HTTP-Support              Available\r\n        [ ] Message Queuing Triggers                    MSMQ-Triggers                  Available\r\n        [ ] Multicasting Support                        MSMQ-Multicasting              Available\r\n        [ ] Routing Service                             MSMQ-Routing                   Available\r\n    [ ] Message Queuing DCOM Proxy                      MSMQ-DCOM                      Available\r\n[ ] Multipath I\/O                                       Multipath-IO                   Available\r\n[ ] Network Load Balancing                              NLB                            Available\r\n[ ] Peer Name Resolution Protocol                       PNRP                           Available\r\n[ ] Quality Windows Audio Video Experience              qWave                          Available\r\n[ ] RAS Connection Manager Administration Kit (CMAK)    CMAK                           Available\r\n[ ] Remote Assistance                                   Remote-Assistance              Available\r\n[ ] Remote Differential Compression                     RDC                            Available\r\n[X] Remote Server Administration Tools                  RSAT                           Installed\r\n    [ ] Feature Administration Tools                    RSAT-Feature-Tools             Available\r\n        [ ] SMTP Server Tools                           RSAT-SMTP                      Available\r\n        [ ] BitLocker Drive Encryption Administratio... RSAT-Feature-Tools-B...        Available\r\n            [ ] BitLocker Drive Encryption Tools        RSAT-Feature-Tools-B...        Available\r\n            [ ] BitLocker Recovery Password Viewer      RSAT-Feature-Tools-B...        Available\r\n        [ ] BITS Server Extensions Tools                RSAT-Bits-Server               Available\r\n        [ ] Failover Clustering Tools                   RSAT-Clustering                Available\r\n            [ ] Failover Cluster Management Tools       RSAT-Clustering-Mgmt           Available\r\n            [ ] Failover Cluster Module for Windows ... RSAT-Clustering-Powe...        Available\r\n            [ ] Failover Cluster Automation Server      RSAT-Clustering-Auto...        Available\r\n            [ ] Failover Cluster Command Interface      RSAT-Clustering-CmdI...        Available\r\n        [ ] IP Address Management (IPAM) Client         IPAM-Client-Feature            Available\r\n        [ ] Network Load Balancing Tools                RSAT-NLB                       Available\r\n        [ ] SNMP Tools                                  RSAT-SNMP                      Available\r\n        [ ] WINS Server Tools                           RSAT-WINS                      Available\r\n    [X] Role Administration Tools                       RSAT-Role-Tools                Installed\r\n        [X] AD DS and AD LDS Tools                      RSAT-AD-Tools                  Installed\r\n            [X] Active Directory module for Windows ... RSAT-AD-PowerShell             Installed\r\n            [X] AD DS Tools                             RSAT-ADDS                      Installed\r\n                [X] Active Directory Administrative ... RSAT-AD-AdminCenter            Installed\r\n                [X] AD DS Snap-Ins and Command-Line ... RSAT-ADDS-Tools                Installed\r\n                [ ] Server for NIS Tools [DEPRECATED]   RSAT-NIS                       Available\r\n            [X] AD LDS Snap-Ins and Command-Line Tools  RSAT-ADLDS                     Installed\r\n        [ ] Hyper-V Management Tools                    RSAT-Hyper-V-Tools             Available\r\n            [ ] Hyper-V GUI Management Tools            Hyper-V-Tools                  Available\r\n            [ ] Hyper-V Module for Windows PowerShell   Hyper-V-PowerShell             Available\r\n        [ ] Remote Desktop Services Tools               RSAT-RDS-Tools                 Available\r\n            [ ] Remote Desktop Gateway Tools            RSAT-RDS-Gateway               Available\r\n            [ ] Remote Desktop Licensing Diagnoser T... RSAT-RDS-Licensing-D...        Available\r\n            [ ] Remote Desktop Licensing Tools          RDS-Licensing-UI               Available\r\n        [ ] Windows Server Update Services Tools        UpdateServices-RSAT            Available\r\n            [ ] API and PowerShell cmdlets              UpdateServices-API             Available\r\n            [ ] User Interface Management Console       UpdateServices-UI              Available\r\n        [X] Active Directory Certificate Services Tools RSAT-ADCS                      Installed\r\n            [X] Certification Authority Management T... RSAT-ADCS-Mgmt                 Installed\r\n            [ ] Online Responder Tools                  RSAT-Online-Responder          Available\r\n        [X] Active Directory Rights Management Servi... RSAT-ADRMS                     Installed\r\n        [X] DHCP Server Tools                           RSAT-DHCP                      Installed\r\n        [X] DNS Server Tools                            RSAT-DNS-Server                Installed\r\n        [ ] Fax Server Tools                            RSAT-Fax                       Available\r\n        [X] File Services Tools                         RSAT-File-Services             Installed\r\n            [X] DFS Management Tools                    RSAT-DFS-Mgmt-Con              Installed\r\n            [X] File Server Resource Manager Tools      RSAT-FSRM-Mgmt                 Installed\r\n            [X] Services for Network File System Man... RSAT-NFS-Admin                 Installed\r\n            [X] Share and Storage Management Tool       RSAT-CoreFile-Mgmt             Installed\r\n        [ ] Network Policy and Access Services Tools    RSAT-NPAS                      Available\r\n        [ ] Print and Document Services Tools           RSAT-Print-Services            Available\r\n        [ ] Remote Access Management Tools              RSAT-RemoteAccess              Available\r\n            [ ] Remote Access GUI and Command-Line T... RSAT-RemoteAccess-Mgmt         Available\r\n            [ ] Remote Access module for Windows Pow... RSAT-RemoteAccess-Po...        Available\r\n        [ ] Volume Activation Tools                     RSAT-VA-Tools                  Available\r\n        [ ] Windows Deployment Services Tools           WDS-AdminPack                  Available\r\n[ ] RPC over HTTP Proxy                                 RPC-over-HTTP-Proxy            Available\r\n[ ] Simple TCP\/IP Services                              Simple-TCPIP                   Available\r\n[X] SMB 1.0\/CIFS File Sharing Support                   FS-SMB1                        Installed\r\n[ ] SMB Bandwidth Limit                                 FS-SMBBW                       Available\r\n[ ] SMTP Server                                         SMTP-Server                    Available\r\n[ ] SNMP Service                                        SNMP-Service                   Available\r\n    [ ] SNMP WMI Provider                               SNMP-WMI-Provider              Available\r\n[ ] Telnet Client                                       Telnet-Client                  Available\r\n[ ] Telnet Server                                       Telnet-Server                  Available\r\n[ ] TFTP Client                                         TFTP-Client                    Available\r\n[X] User Interfaces and Infrastructure                  User-Interfaces-Infra          Installed\r\n    [X] Graphical Management Tools and Infrastructure   Server-Gui-Mgmt-Infra          Installed\r\n    [X] Desktop Experience                              Desktop-Experience             Installed\r\n    [X] Server Graphical Shell                          Server-Gui-Shell               Installed\r\n[ ] Windows Biometric Framework                         Biometric-Framework            Available\r\n[ ] Windows Feedback Forwarder                          WFF                            Available\r\n[ ] Windows Identity Foundation 3.5                     Windows-Identity-Fou...        Available\r\n[ ] Windows Internal Database                           Windows-Internal-Dat...        Available\r\n[X] Windows PowerShell                                  PowerShellRoot                 Installed\r\n    [X] Windows PowerShell 4.0                          PowerShell                     Installed\r\n    [X] Windows PowerShell 2.0 Engine                   PowerShell-V2                  Installed\r\n    [ ] Windows PowerShell Desired State Configurati... DSC-Service                    Available\r\n    [X] Windows PowerShell ISE                          PowerShell-ISE                 Installed\r\n    [ ] Windows PowerShell Web Access                   WindowsPowerShellWeb...        Available\r\n[ ] Windows Process Activation Service                  WAS                            Available\r\n    [ ] Process Model                                   WAS-Process-Model              Available\r\n    [ ] .NET Environment 3.5                            WAS-NET-Environment            Available\r\n    [ ] Configuration APIs                              WAS-Config-APIs                Available\r\n[ ] Windows Search Service                              Search-Service                 Available\r\n[ ] Windows Server Backup                               Windows-Server-Backup          Available\r\n[ ] Windows Server Migration Tools                      Migration                      Available\r\n[ ] Windows Standards-Based Storage Management          WindowsStorageManage...        Available\r\n[ ] Windows TIFF IFilter                                Windows-TIFF-IFilter           Available\r\n[ ] WinRM IIS Extension                                 WinRM-IIS-Ext                  Available\r\n[ ] WINS Server                                         WINS                           Available\r\n[ ] Wireless LAN Service                                Wireless-Networking            Available\r\n[X] WoW64 Support                                       WoW64-Support                  Installed\r\n[ ] XPS Viewer                                          XPS-Viewer                     Available<\/pre>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u0431\u0430\u0437\u043e\u0432\u043e\u0435 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0441 Ansible \u043c\u043e\u0436\u043d\u043e \u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u043d\u044b\u043c)<\/p>\n<p>\u0423\u0434\u0430\u0447\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Ansible \u043d\u0430 Ubuntu server 18.04 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c playbook \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043d\u0430 Windows \u0438 Ubuntu \u0445\u043e\u0441\u0442\u044b. \u0422\u0430\u043a\u0436\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u0430\u043a \u043f\u043e\u0434\u043d\u044f\u0442\u044c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 \u0441 nginx,php7,mysql \u0438 \u043f\u043e\u0434\u043d\u044f\u0442\u044c \u0440\u043e\u043b\u0438 iis, fileserver \u043d\u0430 Windows \u0445\u043e\u0441\u0442\u0430\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e playbook Ansible.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[13,6,5,7,11,54,23,3],"tags":[139,140,64,86,27],"aioseo_notices":[],"_links":{"self":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1124"}],"collection":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=1124"}],"version-history":[{"count":2,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1124\/revisions"}],"predecessor-version":[{"id":1126,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1124\/revisions\/1126"}],"wp:attachment":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=1124"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=1124"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=1124"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}