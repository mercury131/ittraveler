{"id":338,"date":"2015-04-14T14:15:14","date_gmt":"2015-04-14T11:15:14","guid":{"rendered":"http:\/\/ittraveler.org\/?p=338"},"modified":"2020-04-26T22:03:52","modified_gmt":"2020-04-26T19:03:52","slug":"ustanovka-i-nastrojka-radius-servera-na-ubuntu-s-veb-interfejsom","status":"publish","type":"post","link":"http:\/\/ittraveler.org\/ustanovka-i-nastrojka-radius-servera-na-ubuntu-s-veb-interfejsom\/","title":{"rendered":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Radius \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 Ubuntu \u0441 \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c."},"content":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u043a\u0430\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Radius \u0441\u0435\u0440\u0432\u0435\u0440 FreeRadius \u0441 \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c Daloradius<!--more--><\/p>\n<p>\u041f\u0435\u0440\u0435\u0434 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u0430\u043a\u0435\u0442\u044b \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435<\/p>\n<pre class=\"lang:default decode:true\">apt-get update<\/pre>\n<pre class=\"lang:default decode:true\">apt-get upgrade<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c Apache2 \u0438 PHP<\/p>\n<pre class=\"lang:default decode:true\">apt-get install apache2<\/pre>\n<pre class=\"lang:default decode:true\">apt-get install php5 libapache2-mod-php5 php5-mysql php5-gd php-pear php-db<\/pre>\n<p>\u041c\u043e\u0434\u0443\u043b\u0438 php5-gd php-pear php-db \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 Daloradius<\/p>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Mysql \u0441\u0435\u0440\u0432\u0435\u0440<\/p>\n<pre class=\"lang:default decode:true\">apt-get install mysql-server<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c FreeRadius<\/p>\n<pre class=\"lang:default decode:true\">apt-get install freeradius<\/pre>\n<p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443 Mysql<\/p>\n<pre class=\"lang:default decode:true\">#mysql -u root -p<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 radius<\/p>\n<pre class=\"lang:default decode:true\">#mysql&gt; create database radius;<\/pre>\n<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u043c \u043f\u043e\u043b\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e radius<\/p>\n<pre class=\"lang:default decode:true\">#mysql&gt; grant all on radius.* to radius@localhost identified by \"P@$$w0rd\";<\/pre>\n<p>\u041e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043e\u0442 Mysql<\/p>\n<pre class=\"lang:default decode:true\">#mysql&gt; exit<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0430\u043a\u0435\u0442 freeradius-mysql<\/p>\n<pre class=\"lang:default decode:true\">apt-get install freeradius-mysql<\/pre>\n<p>\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 radius<\/p>\n<pre class=\"lang:default decode:true\">#mysql -u root -p radius &lt; \/etc\/freeradius\/sql\/mysql\/schema.sql<\/pre>\n<pre class=\"lang:default decode:true\">#mysql -u root -p radius &lt; \/etc\/freeradius\/sql\/mysql\/nas.sql<\/pre>\n<p>\u0414\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 radcheck<\/p>\n<pre class=\"lang:default decode:true\">#mysql -u root -p<\/pre>\n<pre class=\"lang:default decode:true\">#mysql&gt; use radius;<\/pre>\n<pre class=\"lang:default decode:true\">#mysql&gt; INSERT INTO radcheck (UserName, Attribute, Value) VALUES ('sqltest', 'Password', 'testpwd');<\/pre>\n<pre class=\"lang:default decode:true\">#mysql&gt; exit<\/pre>\n<p><!-- Home ittraveler --><br \/>\n<ins class=\"adsbygoogle\" data-ad-client=\"ca-pub-1890562251101921\" data-ad-slot=\"9117958896\" data-ad-format=\"auto\"><\/ins><\/p>\n<p>(adsbygoogle = window.adsbygoogle || []).push({});<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a Freeradius \u0434\u043b\u044f MySQL<\/p>\n<p>\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 &#8212; <strong>\/etc\/freeradius\/sql.conf<\/strong><\/p>\n<p>\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e \u0442\u0430\u043a\u043e\u0433\u043e \u0432\u0438\u0434\u0430:<\/p>\n<pre class=\"lang:default decode:true\">database = mysql\r\nlogin = radius\r\npassword = thepassword\r\nreadclients = yes<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u0441\u0430\u0439\u0442\u0430 Freeradius<\/p>\n<p>\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 &#8212; <strong>\/etc\/freeradius\/sites-enabled\/default<\/strong><\/p>\n<p>\u041f\u0440\u0438\u0432\u043e\u0434\u0438\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043a \u0432\u0438\u0434\u0443:<\/p>\n<pre class=\"lang:default decode:true\">Uncomment sql on authorize{}\r\n# See \u201cAuthorization Queries\u201d in sql.conf\r\nsql\r\n...\r\nUncomment sql on accounting{}\r\n# See \u201cAccounting queries\u201d in sql.conf\r\nsql\r\n...\r\nUncomment sql on session{}\r\n# See \u201cSimultaneous Use Checking Queries\u201d in sql.conf\r\nsql\r\n...\r\nUncomment sql on post-auth{}\r\n# See \u201cAuthentication Logging Queries\u201d in sql.conf\r\nsql\r\n...<\/pre>\n<p><!-- Home ittraveler --><br \/>\n<ins class=\"adsbygoogle\" data-ad-client=\"ca-pub-1890562251101921\" data-ad-slot=\"9117958896\" data-ad-format=\"auto\"><\/ins><\/p>\n<p>(adsbygoogle = window.adsbygoogle || []).push({});<\/p>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u0430\u0432\u0438\u043c \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b Freeradius \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 Mysql<\/p>\n<p>\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 &#8212; <strong>\/etc\/freeradius\/radiusd.conf<\/strong><\/p>\n<pre class=\"lang:default decode:true\">#Uncomment #$INCLUDE sql.conf\r\n$INCLUDE sql.conf<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.<\/p>\n<p>\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 2 ssh \u043e\u043a\u043d\u0430 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u0430.<\/p>\n<p>\u0412 \u043f\u0435\u0440\u0432\u043e\u043c \u043e\u043a\u043d\u0435 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441 Freeradius<\/p>\n<pre class=\"lang:default decode:true\">service freeradius stop<\/pre>\n<p>\u0418 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 debug<\/p>\n<pre class=\"lang:default decode:true\">freeradius -X - debug mode<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0432\u0442\u043e\u0440\u043e\u0435 \u043e\u043a\u043d\u043e \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u0430 \u0438 \u0432\u0432\u043e\u0434\u0438\u043c \u0437\u0430\u043f\u0440\u043e\u0441<\/p>\n<pre class=\"lang:default decode:true\">radtest sqltest testpwd localhost 18128 testing123<\/pre>\n<p>\u0415\u0441\u043b\u0438 \u0432\u044b\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0442\u0430\u043a\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true\">Sending Access-Request of id 68 to 127.0.0.1 port 1812\r\nUser-Name = \"sqltest\"\r\nUser-Password = \"testpwd\"\r\nNAS-IP-Address = 127.0.1.1\r\nNAS-Port = 18128\r\nrad_recv: Access-Accept packet from host 127.0.0.1 port 1812, id=68, length=20<\/pre>\n<p>\u0422\u043e \u0432\u0441\u0435 \u0432\u043f\u043e\u0440\u044f\u0434\u043a\u0435.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c Radius \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0432 \u0444\u0430\u0439\u043b <strong>\/etc\/freeradius\/clients.conf<\/strong><\/p>\n<p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f:<\/p>\n<pre class=\"lang:default decode:true\">client 192.168.1.0\/16 {\r\n\r\nsecret = secretpass\r\nshortname = testclient\r\nnastype= testdevice\r\n}<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 DaloRadius<\/p>\n<p>\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u041f\u041e<\/p>\n<pre class=\"lang:default decode:true\">wget http:\/\/downloads.sourceforge.net\/project\/daloradius\/daloradius\/daloradius0.9-9\/daloradius-0.9-9.tar.gz<\/pre>\n<p>\u0420\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u044b\u0432\u0430\u0435\u043c \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433<\/p>\n<pre class=\"lang:default decode:true\">tar xvfz daloradius-0.9-9.tar.gz<\/pre>\n<p>\u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c \u0432 \u043f\u0430\u043f\u043a\u0443 <strong>\/var\/www\/<\/strong><\/p>\n<pre class=\"lang:default decode:true\">mv daloradius-0.9-9 \/var\/www\/daloradius<\/pre>\n<p>\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 radius<\/p>\n<pre class=\"lang:default decode:true\">cd \/var\/www\/daloradius\/contrib\/db<\/pre>\n<pre class=\"lang:default decode:true\">mysql -u root -p radius &lt; mysql-daloradius.sql<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u0430\u0432\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430<\/p>\n<p>\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 &#8212; <strong>\/var\/www\/daloradius\/library\/daloradius.conf.php<\/strong><\/p>\n<p>\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0443 <strong>$configValues[&#8216;CONFIG_DB_PASS&#8217;] = &#187;;<\/strong><\/p>\n<p>\u0412 \u043d\u0435\u0435 \u0432\u0432\u043e\u0434\u0438\u043c \u043d\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c \u043a \u0411\u0414<\/p>\n<p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0442\u0430\u043a :<\/p>\n<pre class=\"lang:default decode:true\">$configValues['CONFIG_DB_PASS'] = '\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 root \u043a Mysql';<\/pre>\n<p>\u0415\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0442\u043b\u0438\u0447\u043d\u043e\u0433\u043e \u043e\u0442 root \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443<\/p>\n<pre class=\"lang:default decode:true\">$configValues['CONFIG_DB_USER'] = 'root';<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <strong>http:\/\/serveraddress\/daloradius<\/strong><\/p>\n<p>\u0415\u0441\u043b\u0438 \u0432\u043c\u0435\u0441\u0442\u043e\u00a0 \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0432\u044b \u0432\u0438\u0434\u0438\u0442\u0435 \u043e\u0448\u0438\u0431\u043a\u0443 404, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0444\u0430\u0439\u043b \/etc\/apache2\/sites-available\/000-default.conf<\/p>\n<p>\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 <strong>DocumentRoot \/var\/www\/html<\/strong> \u043d\u0430 <strong>DocumentRoot \/var\/www<\/strong><\/p>\n<p>\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043a daloradius:<\/p>\n<p>\u041b\u043e\u0433\u0438\u043d &#8212; <strong>Administrator<\/strong><\/p>\n<p>\u041f\u0430\u0440\u043e\u043b\u044c &#8212; <strong>radius<\/strong><\/p>\n<p>\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430, \u043a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e \u043d\u0430 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u0435:<\/p>\n<p><img loading=\"lazy\" class=\"alignnone wp-image-527\" src=\"http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/freeradius_yi6t14.png\" alt=\"\" width=\"739\" height=\"527\" srcset=\"http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/freeradius_yi6t14.png 739w, http:\/\/ittraveler.org\/wp-content\/uploads\/2020\/04\/freeradius_yi6t14-211x150.png 211w\" sizes=\"(max-width: 739px) 100vw, 739px\" \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u043a\u0430\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Radius \u0441\u0435\u0440\u0432\u0435\u0440 FreeRadius \u0441 \u0432\u0435\u0431 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c Daloradius<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,11,55],"tags":[79],"aioseo_notices":[],"_links":{"self":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/338"}],"collection":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=338"}],"version-history":[{"count":10,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/338\/revisions"}],"predecessor-version":[{"id":1329,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/338\/revisions\/1329"}],"wp:attachment":[{"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=338"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=338"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=338"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}