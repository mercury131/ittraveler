#                 	Установка и настройка Citrix XenServer Часть 1.                	  
***            ***

			
            
		

    




	
    	  Дата: 22.05.2015 Автор Admin  
	В данном цикле статей, мы рассмотрим установку и настройку виртуальной среды основанной на гипервизоре xenserver.Перейдем к установке гипервизора.
Скачиваем дистрибутив с официального сайта — тут.
Посмотреть возможности XenServer можно на этой странице.
Начнем. Загружаемся с установочного диска.
Выбираем раскладку клавиатуры.
Далее XenServer предупреждает что все данные на дисках будут уничтожены, также возможно установить специальные драйвера нажав F9 если это необходимо.
Принимаем соглашение.
Далее выбираем диск на котором будет располагаться хранилище виртуальных машин. Если необходимо хранилище которое будет расширяться динамически, выбираем Thin provisioning.
Далее выбираем путь файлов установки. В нашем случае это локальное хранилище.
Если у вас отсутствует Supplemental Pack (дополнительные компоненты XenServer) нажимаем No.
Пропускаем проверку установочного диска, т.к. мы уверены что он на 100% рабочий =)
Вводим пароль root.
Указываем сетевой интерфейс для управления сервером.
Указываем сетевые настройки для управляющего интерфейса.
Указываем Hostname и dns сервера.
Указываем временную зону.
Далее для синхронизации времени выбираем NTP.
Указываем адреса NTP серверов.
Подтверждаем установку XenServer.
Ожидаем окончания установки.
После окончания установки перезагружаемся.
После загрузки сервера  устанавливаем Citrix XenCenter.  Актуальную версию можно найти тут (Windows Management Console).
(adsbygoogle = window.adsbygoogle || []).push({});
Запускаем XenCenter, выбираем Add New Server.
Вводим ip адрес установленного сервера и логин с паролем.
После этого в консоли появится наш XenServer.
Перейдем к установке SP1.
Скачивам и распаковываем SP1. Скачать можно отсюда.
В меню XenCenter выбираем Tools — Install Update.
Выбираем SP1.
Выбираем Xen хост.
Следующим шагом загружаем обновление на сервер. Заметьте, иконка сервера изменилась.
Проходим проверку, и нажимаем Next.
Далее предоставим XenCenter возможность самому запустить процесс установки обновления. Нажимаем Install Update.
Ждем окончания установки.
Во время установки хост Xen будет перезагружен. После перезагрузки XenCenter запустит скрипты обновления и завершит установку.
На этом установка SP1 завершена. Можете обратить внимание что после установки SP1 , появляется поддержка windows 10.
Перейдем к настройкам сети. Открываем хост Xen и открываем раздел networking.
Нажимаем add network.
Далее мы создадим агрегированный сетевой адаптер, состоящий из 2-х физических.
Выбираем Bonded network.
Выбираем сетевые адаптеры и тип агрегации.
Если у вас всего 2 физических сетевых адаптера, XenCenter предупредит вас о том что интерфейс управления переместиться в агрегированный интерфейс.
Создаем Bond.
Интерфейс создан.
Теперь создадим сеть для виртуальных машин, сеть будет с определенным VLAN.
Нажимаем Add network.
Выбираем External Network.
Задаем имя сети.
Указываем агрегированный интерфейс и VLAN. Также можно добавлять эту сеть автоматически для новых виртуальных машин.
Теперь у нас есть сети для управления и виртуальных машин.
Теперь перейдем к созданию виртуальной машины.
Выбираем ОС.
Вводим имя.
Выбираем установку с DVD привода хоста.
Выбираем хост Xen.
Указываем ресурсы для VM.
Указываем хранилище.
Выбираем сеть.
Также при выборе сети, можно указать пропускную способность виртуальной машины.
Проверяем введенные данные и создаем виртуальную машину.
Для управления VM перейдите в раздел Console.
(adsbygoogle = window.adsbygoogle || []).push({});
Далее установите ОС в обычном режиме.
Важная особенность, XEN в зависимости от выбранной ОС, сам определяем параметры загрузки ядра ОС, поэтому при установке ubuntu, вы сразу попадаете в режим установки.
Также обратите внимание, что для хранения дисков VM, Xen использует LVM, и отдает ее виртуальной машине как блочное устройство.
Установка Windows проходит в обычном режиме, там Xen не меняет параметры загрузки.
После установки VM установите Xen tools. Дистрибутивы linux, например Ubuntu, устанавливают xen tools на этапе установки ОС.
В Windows нужно установить xen tools вручную. Сделать это можно подключив CD образ Xen tools в консоли Xen.
Добавим второй хост XEN.
Добавляем второй хост по аналогии.
Теперь у нас 2 хоста XenServer.
 
Установите SP1 по аналогии.
В последней версии Xen хосты находят обновления автоматически через XenCenter, и загружают обновления с ближайших хостов Xen.
Продублируйте настройки сети на втором хосте.
Рассмотрим живую миграцию с хоста на хост.
XenServer поддерживает живую миграцию без общих хранилищ.
Запускаем мастер миграции.
Выбираем какую виртуальную машину мы будем мигрировать на какой хост.
Далее будет выбрано локальное хранилище второго хоста Xen.
Далее выбираем сеть, куда VM будет мигрировать.
Далее выбираем Storage Network.
Как видите иконка VM изменилась. Теперь она в статусе миграции.
Как видите Vm успешно мигрировала на второй хост.
Также  возможно администрировать  хост XenServer напрямую, подключившись к консоли сервера.
Данных функций хватит для минимального управления хостом Xen.
В следующей статье мы рассмотрим интеграцию с active directory, настройку пулов серверов, настройку ha, и подключение общих хранилищ.
 
 
Related posts:Запуск команд внутри гостевых ОС в гипервизоре KVM на примере ProxmoxВыполняем команды внутри гостевых ОС через PowerCLIУстановка и настройка VMWare Vsphere 6. Часть 5
        
             Виртуализация 
             Метки: XenServer, Виртуализация  
        
            
        
    



                        
                    
                    
                
        
                
	
    	
        
        	Комментарии
        
		
		 
    
    
        
                    
         
        
            
            
                
                Данил
                  
                09.06.2015 в 14:11 - 
                Ответить                                
                
            
    
                      
            Автор проделал огромную работу в плане визуализации и упрощения туториала. Более 50-ти скриншотов. Огромное спасибо.
          
        
        
        


    
    

 
    
    
        
                    
         
        
            
            
                
                Jack
                  
                16.01.2016 в 17:39 - 
                Ответить                                
                
            
    
                      
            Каким образом произвести подключение? Имеется сервер Win2012 с контроллером домена и сервер XenServer. Должны ли они находиться в одной подсети? И если хочу подключить оболочку XenCenter, на какой клиент её необходимо устанавливать? Спасибо
          
        
        
        


    
    

 
    
    
        
                    
         
        
            
            
                
                Admin
                  
                09.02.2016 в 08:52 - 
                Ответить                                
                
            
    
                      
            Не очень понял ваш вопрос.
Ну желательно чтобы была связь между КД и xenserver, иначе например вы авторизацию через AD на xen не сможете настроить.
Не обязательно чтобы они были в одной подсети, достаточно чтобы они могли пинговать друг друга.
А xencenter нужно ставить на машину с которой будете управлять гипервизором.
          
        
        
        


    
    

	
    








	
		
		Добавить комментарий для Jack Отменить ответВаш адрес email не будет опубликован.Комментарий Имя 
Email 
Сайт 
 
&#916;document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );	
	


<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1890562251101921"
     data-ad-slot="9117958896"
     data-ad-format="auto">

(adsbygoogle = window.adsbygoogle || []).push({});





			
        
        

		

        

           
    
    


  


	
    

		
        
             
			

                

                    
                                                  Все права защищены. IT Traveler 2024 
                         
                        
																														                    
                    

				
                
                
    
			
		                            
	

	
                
                
			
                
		
        
	
    


jQuery(document).ready(function($){
  $("a[rel*=lightbox]").colorbox({initialWidth:"30%",initialHeight:"30%",maxWidth:"90%",maxHeight:"90%",opacity:0.8,current:" {current}  {total}",previous:"",close:"Закрыть"});
});
  



    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter27780774 = new Ya.Metrika({
                    id:27780774,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true,
                    trackHash:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");





  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58126221-1', 'auto');
  ga('send', 'pageview');






