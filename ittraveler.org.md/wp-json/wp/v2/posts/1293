{"id":1293,"date":"2019-10-28T17:58:10","date_gmt":"2019-10-28T14:58:10","guid":{"rendered":"http:\/\/ittraveler.org\/?p=1293"},"modified":"2025-02-07T15:04:11","modified_gmt":"2025-02-07T12:04:11","slug":"ustanovka-i-nastrojka-kafka-klastera","status":"publish","type":"post","link":"https:\/\/ittraveler.org\/ustanovka-i-nastrojka-kafka-klastera\/","title":{"rendered":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Kafka \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430"},"content":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c kafka \u043a\u043b\u0430\u0441\u0442\u0435\u0440 \u0438\u0437 3-\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 ssl.<!--more--><\/p>\n<p>\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043d\u0430 \u0432\u0441\u0435\u0445 3-\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445.<\/p>\n<p>&nbsp;<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 Firewall \u0434\u043b\u044f Kafka \u0438 Zookeeper<\/p>\n<pre class=\"lang:default decode:true \">sudo nano \/etc\/firewalld\/services\/zooKeeper.xml<\/pre>\n<pre class=\"lang:default decode:true \"> \r\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n \r\n&lt;service&gt;\r\n \r\n&lt;short&gt;ZooKeeper&lt;\/short&gt;\r\n \r\n&lt;description&gt;Firewall rule for ZooKeeper ports&lt;\/description&gt;\r\n \r\n&lt;port protocol=\"tcp\" port=\"2888\"\/&gt;\r\n \r\n&lt;port protocol=\"tcp\" port=\"3888\"\/&gt;\r\n \r\n&lt;port protocol=\"tcp\" port=\"2181\"\/&gt;\r\n \r\n&lt;\/service&gt;<\/pre>\n<p>&nbsp;<\/p>\n<pre class=\"lang:default decode:true \">sudo nano \/etc\/firewalld\/services\/kafka.xml<\/pre>\n<pre class=\"lang:default decode:true \">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n \r\n&lt;service&gt;\r\n \r\n&lt;short&gt;Kafka&lt;\/short&gt;\r\n \r\n&lt;description&gt;Firewall rule for Kafka port&lt;\/description&gt;\r\n \r\n&lt;port protocol=\"tcp\" port=\"9092\"\/&gt;\r\n \r\n&lt;\/service&gt;<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430<\/p>\n<pre class=\"lang:default decode:true \">sudo service firewalld restart\r\n\r\nsudo firewall-cmd --permanent --add-service=zooKeeper\r\n\r\nsudo firewall-cmd --permanent --add-service=kafka\r\n\r\nsudo service firewalld restart<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043b\u044f kafka<\/p>\n<pre class=\"lang:default decode:true \">sudo adduser kafka\r\n\r\nsudo passwd kafka<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Java<\/p>\n<pre class=\"lang:default decode:true \">yum install java-1.8.0-openjdk<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e Kafka<\/p>\n<pre class=\"lang:default decode:true \">wget http:\/\/apache-mirror.8birdsvideo.com\/kafka\/2.3.0\/kafka_2.11-2.3.0.tgz<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0420\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u044b\u0432\u0430\u0435\u043c<\/p>\n<pre class=\"lang:default decode:true \">tar -xzf kafka_2.11-2.3.0.tgz<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u043c \u0432 \/opt<\/p>\n<pre class=\"lang:default decode:true \">mv kafka_2.11-2.3.0 \/opt\/kafka<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0438 \u0434\u043b\u044f \u043b\u043e\u0433\u043e\u0432 Kafka \u0438 \u0434\u043b\u044f zooKeeper<\/p>\n<pre class=\"lang:default decode:true \">mkdir -p \/opt\/kafka\/zookeeper\/data\r\n\r\nmkdir -p \/opt\/kafka\/kafka-logs<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 zooKeeper, \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439<\/p>\n<pre class=\"lang:default decode:true \">nano \/opt\/kafka\/config\/zookeeper.properties<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c:<\/p>\n<p>\u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438:<\/p>\n<ul>\n<li>dataDir=\/opt\/kafka\/zookeeper\/data<\/li>\n<\/ul>\n<p>\u0421\u0435\u0440\u0432\u0435\u0440\u0430 \u0438 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438:<\/p>\n<ul>\n<li>server.1=kafka1.dev.local:2888:3888<\/li>\n<li>server.2=kafka2.dev.local:2888:3888<\/li>\n<li>server.3=kafka3.dev.local:2888:3888<\/li>\n<li>initLimit=5<\/li>\n<li>syncLimit=2<\/li>\n<\/ul>\n<p>\u0414\u0430\u043b\u0435\u0435, \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0441\u0432\u043e\u0439 id \u0434\u043b\u044f zooKeeper<\/p>\n<pre class=\"lang:default decode:true \">echo \"1\" &gt; \/opt\/kafka\/zookeeper\/data\/myid (\u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 kafka1.dev.local)\r\n\r\necho \"2\" &gt; \/opt\/kafka\/zookeeper\/data\/myid (\u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 kafka2.dev.local)\r\n\r\necho \"3\" &gt; \/opt\/kafka\/zookeeper\/data\/myid (\u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 kafka3.dev.local)<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 kafka<\/p>\n<p>\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0441\u0435\u0440\u0432\u0435\u0440\u0430<\/p>\n<pre class=\"lang:default decode:true \">nano \/opt\/kafka\/config\/server.properties<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c:<\/p>\n<p><strong>broker.id=1<\/strong> (\u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441\u0432\u043e\u0439 1,2,3)<\/p>\n<p>\u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0441 \u043b\u043e\u0433\u0430\u043c\u0438<\/p>\n<ul>\n<li>log.dirs=\/opt\/kafka\/kafka-logs<\/li>\n<\/ul>\n<p>\u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u0442\u0435\u043b\u0438:<\/p>\n<ul>\n<li>listeners=PLAINTEXT:\/\/:9092<\/li>\n<li>advertised.listeners=PLAINTEXT:\/\/kafka1.dev.local:9092<\/li>\n<li>listeners &#8212; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0433\u043e \u0442\u0440\u0430\u0444\u0444\u0438\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043d\u043e\u0434\u0430\u043c\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430<\/li>\n<li>advertised.listeners &#8212; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u043e\u0433\u043e \u0442\u0440\u0430\u0444\u0444\u0438\u043a\u0430<\/li>\n<\/ul>\n<p>\u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u043d\u043e\u0434\u044b zooKeeper:<\/p>\n<ul>\n<li>zookeeper.connect=kafka1.dev.local:2181,kafka2.dev.local:2181,kafka3.dev.local:2181<\/li>\n<\/ul>\n<p>\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u043f\u0438\u043a\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u043e\u043f\u0446\u0438\u044e \u043d\u0438\u0436\u0435:<\/p>\n<ul>\n<li>delete.topic.enable=true<\/li>\n<\/ul>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043c\u0435\u043d\u044f\u0435\u043c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f kafka<\/p>\n<pre class=\"lang:default decode:true \">chown -R kafka \/opt\/kafka<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u044b systemd \u0434\u043b\u044f zooKeeper \u0438 kafka<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441 zooKeeper<\/p>\n<pre class=\"lang:default decode:true \">nano \/etc\/systemd\/system\/zookeeper.service<\/pre>\n<p>&nbsp;<\/p>\n<pre class=\"lang:default decode:true \">[Unit]\r\n\r\nDescription=ZooKeeper for Kafka\r\n\r\nAfter=network.target\r\n\r\n[Service]\r\n\r\nType=forking\r\n\r\nUser=kafka\r\n\r\nRestart=on-failure\r\n\r\nLimitNOFILE=16384:163840\r\n\r\nExecStart=\/opt\/kafka\/bin\/zookeeper-server-start.sh -daemon \/opt\/kafka\/config\/zookeeper.properties\r\n\r\n[Install]\r\n\r\nWantedBy=multi-user.target<\/pre>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441 Kafka<\/p>\n<pre class=\"lang:default decode:true \">nano \/etc\/systemd\/system\/kafka.service<\/pre>\n<p>&nbsp;<\/p>\n<pre class=\"lang:default decode:true \">[Unit]\r\n\r\nDescription=Kafka Broker\r\n\r\nAfter=network.target\r\n\r\nAfter=zookeeper.service\r\n\r\n[Service]\r\n\r\nType=forking\r\n\r\nUser=kafka\r\n\r\nSyslogIdentifier=kafka (%i)\r\n\r\nRestart=on-failure\r\n\r\nLimitNOFILE=16384:163840\r\n\r\nExecStart=\/opt\/kafka\/bin\/kafka-server-start.sh -daemon \/opt\/kafka\/config\/server.properties\r\n\r\n[Install]\r\n\r\nWantedBy=multi-user.target<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043d\u043e\u0432\u044b\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u0445 \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0438\u0445<\/p>\n<pre class=\"lang:default decode:true \">systemctl daemon-reload\r\n\r\nsystemctl enable zookeeper\r\n\r\nsystemctl enable kafka<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0438 \u0443\u0431\u0435\u0436\u0434\u0430\u0435\u043c\u0441\u044f \u0447\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u044b<\/p>\n<p>\u041b\u043e\u0433\u0438\u043d\u0438\u043c\u0441\u044f \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c kafka<\/p>\n<pre class=\"lang:default decode:true\">su kafka<\/pre>\n<p>\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0441 kafka<\/p>\n<pre class=\"lang:default decode:true \">cd \/opt\/kafka<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u0447\u0442\u043e zooKeeper \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0438 \u0432\u0441\u0435 \u043d\u043e\u0434\u044b \u0432\u0438\u0434\u044f\u0442 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430<\/p>\n<pre class=\"lang:default decode:true \">bin\/zookeeper-shell.sh localhost:2181 ls \/brokers\/ids<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0432\u044b\u0432\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">Connecting to localhost:2181\r\n\r\nWATCHER::\r\n\r\nWatchedEvent state:SyncConnected type:None path:null\r\n\r\n[1, 2, 3]<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b Kafka, \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c Producer, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0442\u043e\u043f\u0438\u043a \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-console-producer.sh --broker-list kafka1:9092,kafka2:9092,kafka3:9092 --topic example-topic<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u0434\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043d\u0430 kafka2, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c Consumer<\/p>\n<pre class=\"lang:default decode:true\">su kafka<\/pre>\n<pre class=\"lang:default decode:true\">cd \/opt\/kafka<\/pre>\n<pre class=\"lang:default decode:true \">bin\/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic example-topic<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u043e\u043c Producer \u0432\u0432\u043e\u0434\u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u043e\u043d\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043d\u0430 \u043d\u043e\u0434\u0435 \u0441 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u043c Consumer<\/p>\n<p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u043f\u0438\u043a\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --list --zookeeper localhost:2181<\/pre>\n<p>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u043c \u0442\u043e\u043f\u0438\u043a\u0435 \u043c\u043e\u0436\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --describe --zookeeper localhost:2181 --topic example-topic<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u043f\u0438\u043a \u043c\u043e\u0436\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --zookeeper localhost:2181 --delete --topic example-topic<\/pre>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u043f\u0438\u043a\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c delete.topic.enable=True \u0432 \u043a\u043e\u043d\u0444\u0438\u0433 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Kafka<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043f\u0438\u043a \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u043c\u043e\u0436\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --create \\\r\n\r\n--zookeeper localhost:2181 \\\r\n\r\n--topic &lt;topic-name&gt; \\\r\n\r\n--partitions &lt;number-of-partitions&gt; \\\r\n\r\n--replication-factor &lt;number-of-replicating-servers&gt;<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u043d\u043a\u0443\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0442\u043e\u043f\u0438\u043a\u0430 \u043f\u0440\u0438 \u0435\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 3 --config min.insync.replicas=1 --config retention.ms=-1 --config unclean.leader.election.enable=false --topic test-topic<\/pre>\n<p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0442\u043e\u043f\u0438\u043a\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 (\u0438\u0437\u043c\u0435\u043d\u0438\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0430\u0440\u0442\u0438\u0446\u0438\u0439 \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <strong>min.insync.replicas<\/strong>):<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --zookeeper localhost:2181 --alter --topic test-topic --partitions 8 --config min.insync.replicas=2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043a Kafka \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">netstat -anp | grep :9092 | grep ESTABLISHED | wc -l<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0423\u0437\u043d\u0430\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440 \u0442\u043e\u043f\u0438\u043a\u0430 \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-log-dirs.sh --bootstrap-server localhost:9092 --topic-list 'test-topic' --describe | grep '^{' | jq '[ ..|.size? | numbers ] | add'<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 consumer \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-consumer-groups.sh --list --bootstrap-server localhost:9092<\/pre>\n<p>\u041f\u043e\u043b\u0443\u0447\u0438\u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e consumer, \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 \u043a\u043b\u0438\u0435\u043d\u0442 console-consumer-70311<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-consumer-groups.sh --describe --group console-consumer-70311 --bootstrap-server localhost:9092<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u0435\u0440\u0436\u043a\u0443 SSL, \u044d\u0442\u043e \u0441\u043d\u0438\u0437\u0438\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043d\u043e \u043f\u043e\u0432\u044b\u0441\u0438\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c, \u0442.\u043a. \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043a kafka \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u044b<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b \u0434\u043b\u044f Kafka, \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u0441\u0430\u043c\u043e\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435, \u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043c\u0435\u0448\u0430\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0439 CA \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438, \u0435\u0441\u043b\u0438 \u043e\u043d \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 <strong>\/opt\/kafka\/ssl<\/strong> \u043d\u0430 \u0432\u0441\u0435\u0445 \u043d\u043e\u0434\u0430\u0445<\/p>\n<pre class=\"lang:default decode:true \">mkdir \/opt\/kafka\/ssl<\/pre>\n<p>\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u043d\u0435\u0433\u043e<\/p>\n<pre class=\"lang:default decode:true \">cd \/opt\/kafka\/ssl<\/pre>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u044e\u0447\u0438 \u0434\u043b\u044f \u043d\u0430\u0448\u0435\u0433\u043e CA<\/p>\n<pre class=\"lang:default decode:true \">openssl req -new -x509 -keyout ca-key -out ca-cert -days 365<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 CA \u0432 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0435 server.truststore.jks \u0438 client.truststore.jks<\/p>\n<pre class=\"lang:default decode:true \">keytool -keystore server.truststore.jks -alias CARoot -import -file ca-cert\r\n\r\nkeytool -keystore client.truststore.jks -alias CARoot -import -file ca-cert<\/pre>\n<p>\u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u044d\u0442\u0438 \u0444\u0430\u0439\u043b\u044b \u043d\u0430 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0434\u044b<\/p>\n<pre class=\"lang:default decode:true \">scp ca-cert root@kafka2:\/opt\/kafka\/ssl\/\r\n\r\nscp ca-cert root@kafka3:\/opt\/kafka\/ssl\/\r\n\r\nscp ca-key root@kafka2:\/opt\/kafka\/ssl\/\r\n\r\nscp ca-key root@kafka3:\/opt\/kafka\/ssl\/\r\n\r\nscp server.truststore.jks root@kafka2:\/opt\/kafka\/ssl\/\r\n\r\nscp server.truststore.jks root@kafka3:\/opt\/kafka\/ssl\/\r\n\r\nscp client.truststore.jks root@kafka2:\/opt\/kafka\/ssl\/\r\n\r\nscp client.truststore.jks root@kafka3:\/opt\/kafka\/ssl\/<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c Java keystore \u0438 CSR \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043b\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u0431\u0440\u043e\u043a\u0435\u0440\u0430, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u044d\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u0430\u0436\u0434\u043e\u0439 \u043d\u043e\u0434\u0435<\/p>\n<pre class=\"lang:default decode:true \">keytool -genkeypair -alias KafkaServerSSL -keyalg RSA -keystore server.keystore.jks -keysize 2048 -dname \"CN=$(hostname -f),OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU\" -ext san=dns:kafka1.dev.local,dns:kafka2.dev.local,dns:kafka3.dev.local<\/pre>\n<pre class=\"lang:default decode:true \">keytool -certreq -alias KafkaServerSSL -keystore server.keystore.jks -file $(hostname -f).csr -ext san=dns:kafka1.dev.local,dns:kafka2.dev.local,dns:kafka3.dev.local -ext EKU=serverAuth,clientAuth<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u043a\u0430\u0442\u0430 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e CN \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 FQDN \u0432\u0430\u0448\u0435\u0433\u043e Kafka \u0441\u0435\u0440\u0432\u0435\u0440\u0430<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b myssl-config.cnf \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c<\/p>\n<pre class=\"lang:default decode:true \">[ SAN ]\r\n\r\nextendedKeyUsage = serverAuth, clientAuth\r\n\r\nsubjectAltName = @alt_names\r\n\r\n[alt_names]\r\n\r\nDNS.1 = kafka1.dev.local\r\n\r\nDNS.2 = kafka2.dev.local\r\n\r\nDNS.3 = kafka3.dev.local<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c \u0435\u0433\u043e \u043d\u0430\u0448\u0438\u043c CA (\u043f\u0430\u0440\u043e\u043b\u044c \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0442 \u0441\u0432\u043e\u0435\u0433\u043e CA)<\/p>\n<pre class=\"lang:default decode:true \">openssl x509 -req -CA ca-cert -CAkey ca-key -extensions SAN -extfile myssl-config.cnf -in $(hostname -f).csr -out cert-signed -CAcreateserial -passin pass:123123<\/pre>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u043a\u0430\u0442\u044b \u0432 server.keystore.jks<\/p>\n<pre class=\"lang:default decode:true \">keytool -keystore server.keystore.jks -alias CARoot -import -file ca-cert\r\n\r\nkeytool -import -file cert-signed -keystore server.keystore.jks -alias KafkaServerSSL<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u043d\u043e\u0434\u0435 \u0435\u0441\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b, \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 KAFKA, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 SSL.<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c server.properties \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433<\/p>\n<pre class=\"lang:default decode:true \">nano \/opt\/kafka\/config\/server.properties<\/pre>\n<pre class=\"lang:default decode:true \">ssl.keystore.location=\/opt\/kafka\/ssl\/server.keystore.jks\r\n\r\nssl.keystore.password=123123\r\n\r\nssl.key.password=123123\r\n\r\nssl.truststore.location=\/opt\/kafka\/ssl\/server.truststore.jks\r\n\r\nssl.truststore.password=123123\r\n\r\nssl.client.auth=none\r\n\r\nssl.enabled.protocols=TLSv1.2,TLSv1.1,TLSv1\r\n\r\nssl.keystore.type=JKS\r\n\r\nssl.truststore.type=JKS\r\n\r\nsecurity.inter.broker.protocol=SSL\r\n\r\nssl.endpoint.identification.algorithm=\r\n\r\nlisteners=PLAINTEXT:\/\/:9092,SSL:\/\/kafka1.dev.local:9093\r\n\r\nadvertised.listeners=PLAINTEXT:\/\/kafka1.dev.local:9092,SSL:\/\/kafka1.dev.local:9093<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f firewall<\/p>\n<pre class=\"lang:default decode:true \">sudo nano \/etc\/firewalld\/services\/kafkassl.xml<\/pre>\n<pre class=\"lang:default decode:true \">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n\r\n&lt;service&gt;\r\n\r\n&lt;short&gt;Kafkassl&lt;\/short&gt;\r\n\r\n&lt;description&gt;Firewall rule for Kafka SSL port&lt;\/description&gt;\r\n\r\n&lt;port protocol=\"tcp\" port=\"9093\"\/&gt;\r\n\r\n&lt;\/service&gt;<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430<\/p>\n<pre class=\"lang:default decode:true \">sudo service firewalld restart\r\n\r\nsudo firewall-cmd --permanent --add-service=kafkassl\r\n\r\nsudo service firewalld restart<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u044b Kafka<\/p>\n<pre class=\"lang:default decode:true \">service kafka restart<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c Kafka \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043f\u043e \u043f\u043e\u0440\u0442\u0443 SSL<strong> 9093<\/strong><\/p>\n<p>\u041d\u043e \u0447\u0442\u043e\u0431\u044b \u043a \u043d\u0435\u0439 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b client.properties, \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0435\u0433\u043e<\/p>\n<pre class=\"lang:default decode:true \">nano client.properties<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430:<\/p>\n<pre class=\"lang:default decode:true \">security.protocol=SSL\r\n\r\nssl.truststore.location=\/opt\/kafka\/ssl\/client.truststore.jks\r\n\r\nssl.truststore.password=123123\r\n\r\nssl.truststore.type=JKS\r\n\r\nssl.keystore.type=JKS<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 truststore, \u0442\u0438\u043f \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0438 security protocol<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c, \u0447\u0442\u043e\u0431\u044b producer \u0438\u043b\u0438 consumer \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438, \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0438\u043c \u044d\u0442\u043e\u0442 \u043a\u043e\u043d\u0444\u0438\u0433 \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435<\/p>\n<p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 producer<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-producer.sh --producer.config client.properties --broker-list kafka1.dev.local:9093,kafka2.dev.local:9093,kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 consumer<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-consumer.sh --consumer.config client.properties --bootstrap-server kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0442\u043e \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u044b\u0439 FQDN \u0431\u0440\u043e\u043a\u0435\u0440\u043e\u0432<\/p>\n<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 CA, \u0442\u043e \u0432\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0447\u0442\u043e\u0431\u044b \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c PFX \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b \u0432 keystore:<\/p>\n<pre class=\"lang:default decode:true \">keytool -importkeystore -srckeystore cert.pfx -srcstoretype pkcs12 -destkeystore cert.keystore.jks -deststoretype JKS<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0430\u043a\u0436\u0435, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0442\u043e Kafka \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 ssl.keystore.password (\u0432 \u0444\u0430\u0439\u043b\u0435 server.properties) \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0447\u0442\u043e \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430 \u0438 keystore \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442.<br \/>\n\u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0442\u0430\u043a, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043f\u043e \u0437\u0430\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430:<\/p>\n<pre class=\"lang:default decode:true \">keytool -keypasswd -keystore cert.keystore.jks -alias Hnmshuefg7efsjfh3w4hffs<\/pre>\n<p>\u0423\u0437\u043d\u0430\u0442\u044c \u0430\u043b\u0438\u0430\u0441 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0432 keystore \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">keytool -list -v -keystore cert.keystore.jks<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043c\u044b \u0434\u0432\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430, \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443 \u0438 \u043f\u0430\u0440\u043e\u043b\u044e \u0438 \u043f\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0443.<\/p>\n<p>\u041d\u0430\u0447\u043d\u0435\u043c \u0441 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/opt\/kafka\/config\/kafka_jaas.conf<\/strong> , \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0431\u0443\u0434\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u043b\u043e\u0433\u0438\u043d\u044b \u0438 \u043f\u0430\u0440\u043e\u043b\u0438 \u0432 <strong>SASL\/PLAIN<\/strong> \u0444\u043e\u0440\u043c\u0430\u0442\u0435<\/p>\n<pre class=\"lang:default decode:true \">nano \/opt\/kafka\/config\/kafka_jaas.conf<\/pre>\n<p>\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">KafkaServer {\r\n\r\norg.apache.kafka.common.security.plain.PlainLoginModule required\r\n\r\nusername=\"admin\"\r\n\r\npassword=\"password\"\r\n\r\nuser_admin=\"password\"\r\n\r\nuser_test=\"password\";\r\n\r\n};<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0418\u0442\u043e\u0433\u043e \u043c\u044b \u0441\u043e\u0437\u0434\u0430\u043b\u0438 3 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:<strong>brokeradmin,admin,test<\/strong><\/p>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u0442\u0440\u043e\u043a\u0443 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u0435\u0440\u0432\u0438\u0441\u0430 kafka \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 Djava.security.auth.login.config , \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e <strong>KAFKA_OPTS<\/strong>, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c:<\/p>\n<pre class=\"lang:default decode:true \">nano \/etc\/systemd\/system\/kafka.service<\/pre>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0443 <em>Environment=&#8217;KAFKA_OPTS=-Djava.security.auth.login.config=\/opt\/kafka\/config\/kafka_jaas.conf&#8217;<\/em><\/p>\n<p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true \">[Unit]\r\n\r\nDescription=Kafka Broker\r\n\r\nAfter=network.target\r\n\r\nAfter=zookeeper.service\r\n\r\n[Service]\r\n\r\nType=forking\r\n\r\nUser=kafka\r\n\r\nSyslogIdentifier=kafka (%i)\r\n\r\nRestart=on-failure\r\n\r\nLimitNOFILE=16384:163840\r\n\r\nEnvironment='KAFKA_OPTS=-Djava.security.auth.login.config=\/opt\/kafka\/config\/kafka_jaas.conf'\r\n\r\nExecStart=\/opt\/kafka\/bin\/kafka-server-start.sh -daemon \/opt\/kafka\/config\/server.properties\r\n\r\n[Install]\r\n\r\nWantedBy=multi-user.target<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/opt\/kafka\/config\/server.properties<\/strong><\/p>\n<pre class=\"lang:default decode:true \">nano \/opt\/kafka\/config\/server.properties<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\/\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0438:<\/p>\n<ul>\n<li>listeners=SASL_SSL:\/\/kafka1.dev.local:9093<\/li>\n<li>advertised.listeners=SASL_SSL:\/\/kafka1.dev.local:9093<\/li>\n<li>security.inter.broker.protocol=SASL_SSL<\/li>\n<li>sasl.mechanism.inter.broker.protocol=PLAIN<\/li>\n<li>sasl.enabled.mechanisms=PLAIN<\/li>\n<li>authorizer.class.name=kafka.security.auth.SimpleAclAuthorizer<\/li>\n<li>ssl.endpoint.identification.algorithm=<\/li>\n<li>super.users=User:admin<\/li>\n<\/ul>\n<p>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u044d\u0442\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043d\u0430 \u0432\u0441\u0435\u0445 \u0442\u0440\u0435\u0445 \u043d\u043e\u0434\u0430\u0445 kafka1.dev.local\/kafka2.dev.local\/kafka2.dev.local \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u044b.<\/p>\n<pre class=\"lang:default decode:true \">systemctl daemon-reload\r\n\r\nsystemctl restart kafka<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c, \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Producer \u0441\u043e \u0441\u0442\u0430\u0440\u044b\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u043e\u043c \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043c \u043e\u0448\u0438\u0431\u043a\u0443 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438.<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-producer.sh --producer.config client.properties --broker-list kafka1.dev.local:9093,kafka2.dev.local:9093,kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>\u043e\u0448\u0438\u0431\u043a\u0430 &#8212; disconnected<\/p>\n<p>\u0427\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e, \u0438\u0437\u043c\u0435\u043d\u0438\u043c \u0442\u0438\u043f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432 client.properties \u043d\u0430 SASL_SSL<\/p>\n<pre class=\"lang:default decode:true \">nano client.properties<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\/\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0438:<\/p>\n<ul>\n<li>security.protocol=SASL_SSL<\/li>\n<li>sasl.mechanism=PLAIN<\/li>\n<\/ul>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0435\u043c jaas \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438<\/p>\n<pre class=\"lang:default decode:true \">nano jaas.conf<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430:<\/p>\n<pre class=\"lang:default decode:true \">KafkaClient {\r\n\r\norg.apache.kafka.common.security.plain.PlainLoginModule required\r\n\r\nusername=\"test\"\r\n\r\npassword=\"password\";\r\n\r\n};<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Consumer \u0438\u043b\u0438 producer \u043d\u0443\u0436\u043d\u043e \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e <strong>KAFKA_OPTS<\/strong>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u043d\u0430\u0448\u0438 \u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435<\/p>\n<pre class=\"lang:default decode:true \">export KAFKA_OPTS=\"-Djava.security.auth.login.config=jaas.conf\"<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0435\u0449\u0435 \u0440\u0430\u0437, \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u043e \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043c \u043e\u0448\u0438\u0431\u043a\u0443 <strong>TOPIC_AUTHORIZATION_FAILED<\/strong><\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-producer.sh --producer.config client.properties --broker-list kafka1.dev.local:9093,kafka2.dev.local:9093,kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u043f\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438 Consumer \u043d\u0430 \u0441\u043e\u0441\u0435\u0434\u043d\u0435\u0439 \u043d\u043e\u0434\u0435 \u0438 \u0432\u0438\u0434\u0438\u043c \u0447\u0442\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0435 \u0447\u0438\u0442\u0430\u044e\u0442\u0441\u044f, \u043e\u0448\u0438\u0431\u043a\u0430 <strong>TOPIC_AUTHORIZATION_FAILED<\/strong><\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-consumer.sh --consumer.config client.properties --bootstrap-server kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0442\u0435\u043c \u0447\u0442\u043e \u043c\u044b \u0435\u0449\u0435 \u043d\u0435 \u0432\u044b\u0434\u0430\u043b\u0438 \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0442\u043e\u043f\u0438\u043a\u0438 Kafka. \u0418\u0441\u043f\u0440\u0430\u0432\u0438\u043c \u044d\u0442\u043e.<\/p>\n<p>\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e test \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0442\u043e\u043f\u0438\u043a example-topic2 \u0441 \u043b\u044e\u0431\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:test --operation Write --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0418 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:test --operation Read --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0430\u043a\u0436\u0435 \u043d\u0443\u0436\u043d\u043e \u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b, \u0432 \u043c\u043e\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u0433\u0440\u0443\u043f\u043f\u0430 console-consumer-87796<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:test --operation Read --group console-consumer-87796<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0415\u0441\u043b\u0438 \u0442\u043e\u043f\u0438\u043a \u0435\u0449\u0435 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d, \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0438\u0445 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435, \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u044d\u0442\u043e \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:test --operation Create --group console-consumer-87796<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043c\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0441\u0440\u0430\u0437\u0443 \u043d\u0430 \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b, \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u044d\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c &#8212;group=&#8217;*&#8217; , \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:test --operation Read --topic example-topic2 --group='*'<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Consumer \u0438 Producer, \u0432\u0441\u0435 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e.<\/p>\n<p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u0441\u044f \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043c\u043e\u0436\u043d\u043e \u0442\u0443\u0442 &#8212; <a href=\"https:\/\/docs.confluent.io\/current\/kafka\/authorization.html\">https:\/\/docs.confluent.io\/current\/kafka\/authorization.html<\/a><\/p>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c, \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u0435\u0442\u043e\u0434, \u0432\u044b\u0434\u0430\u0447\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430\u043c.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c Java keystore \u0438 CSR \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043b\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.<\/p>\n<pre class=\"lang:default decode:true \">keytool -genkeypair -alias KafkaClientSSL -keyalg RSA -keystore client.keystore.jks -keysize 2048 -dname \"CN=kafka-client.dev.local,OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU\"\r\n\r\nkeytool -certreq -alias KafkaClientSSL -keystore client.keystore.jks -file client.csr -ext EKU=serverAuth,clientAuth<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u043a\u0430\u0442\u0430 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e CN \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 FQDN \u0432\u0430\u0448\u0435\u0433\u043e Kafka \u043a\u043b\u0438\u0435\u043d\u0442\u0430<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>client-config.cnf<\/strong> \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c<\/p>\n<pre class=\"lang:default decode:true \">[ SAN ]\r\n\r\nextendedKeyUsage = serverAuth, clientAuth<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c \u0435\u0433\u043e \u043d\u0430\u0448\u0438\u043c CA (\u043f\u0430\u0440\u043e\u043b\u044c \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0442 \u0441\u0432\u043e\u0435\u0433\u043e CA)<\/p>\n<pre class=\"lang:default decode:true \">openssl x509 -req -CA ca-cert -CAkey ca-key -extensions SAN -extfile client-config.cnf -in client.csr -out client-cert-signed -CAcreateserial -passin pass:123123<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u043a\u0430\u0442 \u0432 client.keystore.jks<\/p>\n<pre class=\"lang:default decode:true \">keytool -keystore client.keystore.jks -alias CARoot -import -file ca-cert\r\n\r\nkeytool -import -file client-cert-signed -keystore client.keystore.jks -alias KafkaClientSSL<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f<\/p>\n<pre class=\"lang:default decode:true \">security.protocol=SSL\r\n\r\nsasl.mechanism=PLAIN\r\n\r\nssl.truststore.location=\/opt\/kafka\/ssl\/client.truststore.jks\r\n\r\nssl.truststore.password=123123\r\n\r\n#ssl.enabled.protocols=TLSv1.2,TLSv1.1,TLSv1\r\n\r\nssl.truststore.type=JKS\r\n\r\nssl.keystore.type=JKS\r\n\r\nssl.keystore.location=\/opt\/kafka\/ssl\/client.keystore.jks\r\n\r\nssl.keystore.password=123123\r\n\r\nssl.key.password=123123<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0447\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432 server.properties \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435:<\/p>\n<pre class=\"lang:default decode:true \">ssl.keystore.location=\/opt\/kafka\/ssl\/server.keystore.jks\r\n\r\nssl.keystore.password=123123\r\n\r\nssl.key.password=123123\r\n\r\nssl.truststore.location=\/opt\/kafka\/ssl\/server.truststore.jks\r\n\r\nssl.truststore.password=123123\r\n\r\nssl.client.auth=required\r\n\r\nssl.enabled.protocols=TLSv1.2,TLSv1.1,TLSv1\r\n\r\nssl.keystore.type=JKS\r\n\r\nssl.truststore.type=JKS\r\n\r\nsecurity.inter.broker.protocol=SSL\r\n\r\nssl.endpoint.identification.algorithm=\r\nauthorizer.class.name=kafka.security.auth.SimpleAclAuthorizer\r\nsuper.users=User:CN=kafka1.dev.local,OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412\u044b\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0442\u043e\u043f\u0438\u043a example-topic2<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:'CN=kafka-client.dev.local,OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU' --operation Write --topic example-topic2\r\n\r\n\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:'CN=kafka-client.dev.local,OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU' --operation Create --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412\u044b\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0432 \u0442\u043e\u043f\u0438\u043a example-topic2<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:'CN=kafka-client.dev.local,OU=IT,O=COMPANY,L=RUSSIA,ST=Moscow,C=RU' --operation Read --topic example-topic2 --group '*'<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c Producer<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-producer.sh --producer.config client.propertiesssl --broker-list kafka1.dev.local:9093,kafka2.dev.local:9093,kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u043c Consumer<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-consumer.sh --consumer.config client.propertiesssl --bootstrap-server kafka3.dev.local:9093 --topic example-topic2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c kafka.<\/p>\n<p>\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u044f \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0432 10 000 000 \u0441\u0442\u0440\u043e\u043a, \u044d\u0442\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 \u043c\u044b \u0437\u0430\u043f\u0438\u0448\u0435\u043c \u0432 \u0442\u043e\u043f\u0438\u043a kafka, \u0434\u0430\u043b\u0435\u0435 \u043f\u0440\u0438\u043c\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f consumer \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u043c \u0438\u0445 \u0432 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b.<br \/>\n\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u043c\u044b \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u043c \u043e\u0434\u043d\u0443 \u0438\u0437 3-\u0445 \u043d\u043e\u0434 kafka \u0438 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0441\u0440\u0430\u0432\u043d\u0438\u043c, \u0444\u0430\u0439\u043b \u043d\u0430 consumer \u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b.<br \/>\n\u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 kafka \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0442\u043e \u0444\u0430\u0439\u043b\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0442\u043e\u043f\u0438\u043a million<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 3 --config min.insync.replicas=2 --config retention.ms=-1 --config unclean.leader.election.enable=false --topic million<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b<\/p>\n<pre class=\"lang:default decode:true \">touch generate<\/pre>\n<pre class=\"lang:default decode:true\">nano generate<\/pre>\n<pre class=\"lang:default decode:true \">#\/bin\/bash\r\n\r\nfor i in {1..10000000};\r\n\r\ndo\r\n\r\necho $i\r\necho $i &gt;&gt; tokafka.txt<\/pre>\n<pre class=\"lang:default decode:true\">chmod +x generate<\/pre>\n<pre class=\"lang:default decode:true\">.\/generate<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438 \u0433\u043e\u0442\u043e\u0432.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0434\u043b\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445<\/p>\n<pre class=\"lang:default decode:true \">cat tokafka.txt | \/opt\/kafka\/bin\/kafka-console-producer.sh --producer.config client.propertiesssl --broker-list kafka1.dev.local:9093,kafka2.dev.local:9093,kafka3.dev.local:9093 --topic million<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0442\u0435\u043f\u0435\u0440\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0441 consumer \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441\u0430\u043c consumer \u0441 \u0432\u044b\u0432\u043e\u0434\u043e\u043c \u0432 \u0444\u0430\u0439\u043b<\/p>\n<pre class=\"lang:default decode:true \">\/opt\/kafka\/bin\/kafka-console-consumer.sh --consumer.config client.propertiesssl --bootstrap-server kafka1.dev.local:9093 --topic million &gt; from-kafka.txt<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441\u043a\u0440\u0438\u043f\u0442 Producer-\u0430 , \u0432\u0438\u0434\u0438\u043c \u0447\u0442\u043e \u043f\u043e\u0448\u043b\u0430 \u0437\u0430\u043b\u0438\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u043b\u044e\u0431\u0443\u044e \u0438\u0437 \u043d\u043e\u0434 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 kafka<\/p>\n<p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u0444\u0430\u0439\u043b from-kafka.txt ,\u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:<\/p>\n<pre class=\"lang:default decode:true \">wc -l from-kafka.txt<\/pre>\n<p>\u0447\u0438\u0441\u043b\u043e \u0441\u0442\u0440\u043e\u043a \u0432 \u0432\u044b\u0432\u043e\u0434\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c 10000000.<\/p>\n<p>\u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0431\u0440\u043e\u043a\u0435\u0440\u043e\u0432 \u043d\u0435 \u043f\u043e\u0432\u043b\u0438\u044f\u043b\u0430 \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443\/\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.<\/p>\n<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0442\u043e\u043f\u0438\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043d\u043e\u0434:<\/p>\n<pre class=\"lang:default decode:true \">bin\/kafka-topics.sh --describe --zookeeper localhost:2181 --topic million<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0412\u044b\u0432\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:<\/p>\n<pre class=\"lang:default decode:true \">Topic:million PartitionCount:3 ReplicationFactor:3 Configs:retention.ms=-1,unclean.leader.election.enable=false,min.insync.replicas=2\r\nTopic: million Partition: 0 Leader: 1 Replicas: 1,2,3 Isr: 1,2\r\nTopic: million Partition: 1 Leader: 2 Replicas: 2,3,1 Isr: 2,1\r\nTopic: million Partition: 2 Leader: 1 Replicas: 3,1,2 Isr: 1,2<\/pre>\n<p>&nbsp;<\/p>\n<p>\u041a\u0430\u043a \u0432\u0438\u0434\u0438\u043c \u0447\u0438\u0441\u043b\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0440\u0435\u043f\u043b\u0438\u043a &#8212; 1 (Isr), \u0432\u0441\u0435 \u043f\u0430\u0440\u0442\u0438\u0446\u0438\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0438 \u0443 \u043a\u0430\u0436\u0434\u043e\u0439 \u0438\u0437 \u043d\u0438\u0445 \u0435\u0441\u0442\u044c \u043b\u0438\u0434\u0435\u0440.<\/p>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0442\u043e\u043f\u0438\u043a \u0431\u044b\u043b \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0442.\u043a. \u043c\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:<\/p>\n<p><strong>min.insync.replicas<\/strong> &#8212; \u043a\u043e\u043b-\u0432\u043e \u0440\u0435\u043f\u043b\u0438\u043a, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435, \u043f\u0440\u0435\u0436\u0434\u0435 \u0447\u0435\u043c \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f.<br \/>\n<strong>unclean.leader.election.enable=false<\/strong> \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 failover \u043d\u0430 \u043d\u0435 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0443\u044e \u043e\u0442\u0441\u0442\u0430\u044e\u0449\u0443\u044e \u0440\u0435\u043f\u043b\u0438\u043a\u0443 \u0441 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u043e\u0442\u0435\u0440\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445<br \/>\n<strong>ReplicationFactor:3<\/strong> &#8212; \u043a\u043e\u043b-\u0432\u043e \u0440\u0435\u043f\u043b\u0438\u043a, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0435.<\/p>\n<p>\u041f\u043e\u0441\u043b\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u0439 \u0440\u0435\u043f\u043b\u0438\u043a\u0438 \u0432\u0438\u0434\u0438\u043c \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b<\/p>\n<pre class=\"lang:default decode:true \">Topic:million PartitionCount:3 ReplicationFactor:3 Configs:retention.ms=-1,unclean.leader.election.enable=false,min.insync.replicas=2\r\nTopic: million Partition: 0 Leader: 1 Replicas: 1,2,3 Isr: 1,2,3\r\nTopic: million Partition: 1 Leader: 2 Replicas: 2,3,1 Isr: 2,1,3\r\nTopic: million Partition: 2 Leader: 1 Replicas: 3,1,2 Isr: 1,2,3<\/pre>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c kafka \u043a\u043b\u0430\u0441\u0442\u0435\u0440 \u0438\u0437 3-\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 ssl.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[13,8,6],"tags":[],"class_list":["post-1293","post","type-post","status-publish","format-standard","hentry","category-bash","category-debian","category-linux","post-container col-md-12"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1293","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=1293"}],"version-history":[{"count":2,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1293\/revisions"}],"predecessor-version":[{"id":1295,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1293\/revisions\/1295"}],"wp:attachment":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=1293"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=1293"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=1293"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}