{"id":1269,"date":"2019-09-15T12:45:39","date_gmt":"2019-09-15T09:45:39","guid":{"rendered":"http:\/\/ittraveler.org\/?p=1269"},"modified":"2019-09-15T12:45:39","modified_gmt":"2019-09-15T09:45:39","slug":"docker-osnovnye-primery-ispolzovaniya","status":"publish","type":"post","link":"https:\/\/ittraveler.org\/docker-osnovnye-primery-ispolzovaniya\/","title":{"rendered":"Docker \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f."},"content":{"rendered":"<p>\u0412 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u044f \u0445\u043e\u0442\u0435\u043b \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0435\u0446\u0435\u043f\u0442\u044b \u0438 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u043e Docker, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u043d\u0438\u043c \u0438 \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443.<\/p>\n<p><!--more--><\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041d\u0430\u0447\u043d\u0435\u043c \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Do\u0441ker \u043c\u043e\u0436\u043d\u043e \u0442\u0430\u043a:<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>\u041d\u0430 Debian based:<\/strong><\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u0442\u0430\u0432\u0438\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true \">sudo apt-get update\r\n\r\nsudo apt-get install \\\r\n\r\n\u00a0\u00a0\u00a0 apt-transport-https \\\r\n\r\n\u00a0\u00a0\u00a0 ca-certificates \\\r\n\r\n\u00a0\u00a0\u00a0 curl \\\r\n\r\n\u00a0\u00a0\u00a0 gnupg2 \\\r\n\r\n\u00a0\u00a0\u00a0 software-properties-common<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043a\u043b\u044e\u0447 GPG \u0434\u043b\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f Docker<\/p>\n<pre class=\"lang:default decode:true \">curl -fsSL https:\/\/download.docker.com\/linux\/debian\/gpg | sudo apt-key add -<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439<\/p>\n<pre class=\"lang:default decode:true\">sudo add-apt-repository \\\r\n\r\n\u00a0\u00a0 \"deb [arch=amd64] https:\/\/download.docker.com\/linux\/debian \\\r\n\r\n\u00a0\u00a0 $(lsb_release -cs) \\\r\n\r\n\u00a0\u00a0 stable<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u0442\u0430\u0432\u0438\u043c Docker<\/p>\n<pre class=\"lang:default decode:true \">sudo apt-get update\r\n\r\nsudo apt-get install docker-ce docker-ce-cli containerd.io<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 Docker \u0432 Ubuntu \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c \u0442\u0435 \u0436\u0435 \u0448\u0430\u0433\u0438 \u043a\u0440\u043e\u043c\u0435:<\/p>\n<pre class=\"lang:default decode:true \">curl -fsSL https:\/\/download.docker.com\/linux\/ubuntu\/gpg | sudo apt-key add -<\/pre>\n<pre class=\"lang:default decode:true\">sudo add-apt-repository \\\r\n\r\n\u00a0\u00a0 \"deb [arch=amd64] https:\/\/download.docker.com\/linux\/ubuntu \\\r\n\r\n\u00a0\u00a0 $(lsb_release -cs) \\\r\n\r\n\u00a0\u00a0 stable\"<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 Docker \u043d\u0430 CentOS \u0434\u0435\u043b\u0430\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b<\/p>\n<pre class=\"lang:default decode:true\">sudo yum install -y yum-utils \\\r\n\r\n\u00a0 device-mapper-persistent-data \\\r\n\r\n\u00a0 lvm2<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439<\/p>\n<pre class=\"lang:default decode:true\">sudo yum-config-manager \\\r\n\r\n\u00a0\u00a0\u00a0 --add-repo \\\r\n\r\n\u00a0\u00a0\u00a0 https:\/\/download.docker.com\/linux\/centos\/docker-ce.repo<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Docker<\/p>\n<pre class=\"lang:default decode:true \">sudo yum install docker-ce docker-ce-cli containerd.io<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0417\u0430\u043f\u0443\u0441\u043a \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443:<\/p>\n<pre class=\"lang:default decode:true \">docker run hello-world<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0434\u0432\u0443\u0445 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 \u0441 \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u043e\u043c \u043f\u043e\u0440\u0442\u043e\u0432 \u043d\u0430\u0440\u0443\u0436\u0443 \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435\u043c \u043b\u0438\u043d\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\u043c\u0438 \u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c volume \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445.<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435<\/p>\n<pre class=\"lang:default decode:true\">docker run -it --name teamcity-server-instance\u00a0 \\\r\n\r\n\u00a0\u00a0\u00a0 -v data:\/data\/teamcity_server\/datadir \\\r\n\r\n\u00a0\u00a0\u00a0 -v logs:\/opt\/teamcity\/logs\u00a0 \\\r\n\r\n\u00a0\u00a0\u00a0 -p 8080:8111 \\\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 --link gitlab \\\r\n\r\n\u00a0\u00a0\u00a0 jetbrains\/teamcity-server<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0432 \u0444\u043e\u043d\u0435<\/p>\n<pre class=\"lang:default decode:true \">docker run --detach \\\r\n\r\n\u00a0 --hostname mydockerserver.local \\\r\n\r\n\u00a0 --env GITLAB_OMNIBUS_CONFIG=\"external_url 'http:\/\/mydockerserver.local\/'; gitlab_rails['lfs_enabled'] = true;\" \\\r\n\r\n\u00a0 --publish 443:443 --publish 80:80 --publish 2222:2222 \\\r\n\r\n\u00a0 --name gitlab \\\r\n\r\n\u00a0 --restart always \\\r\n\r\n\u00a0 --volume config:\/etc\/gitlab \\\r\n\r\n\u00a0 --volume logs:\/var\/log\/gitlab \\\r\n\r\n\u00a0 --volume data:\/var\/opt\/gitlab \\\r\n\r\n\u00a0 gitlab\/gitlab-ce:latest<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043c\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0438 2 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430, teamcity \u0438 gitlab, \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0447\u0435\u0440\u0435\u0437 ip \u0430\u0434\u0440\u0435\u0441 \u043d\u0430\u0448\u0435\u0433\u043e \u0445\u043e\u0441\u0442\u0430 (\u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0437\u0430\u043f\u0443\u0449\u0435\u043d Docker)<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043b\u0438 \u0441\u0432\u044f\u0437\u044c \u043c\u0435\u0436\u0434\u0443 \u044d\u0442\u0438\u043c\u0438 \u0434\u0432\u0443\u043c\u044f \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\u043c\u0438.<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;publish<\/strong> &#8212; \u043f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u043e\u0432<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;name<\/strong> \u0438\u043c\u044f \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;restart<\/strong> \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438 \u043f\u0430\u0434\u0435\u043d\u0438\u0438<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;volume<\/strong> \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 &#8212;volume logs:\/var\/log\/gitlab &#8212; \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442 \u043f\u0430\u043f\u043a\u0443 \/var\/log\/gitlab \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0432 \u043f\u0430\u043f\u043a\u0435 logs<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;env<\/strong> \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;detach<\/strong> \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0432 \u0444\u043e\u043d\u0435<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>-it<\/strong> \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>&#8212;link<\/strong> \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043b\u0438\u043d\u043a\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0443 \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u0430\u043a\u043e\u0439 \u043e\u0431\u0440\u0430\u0437 docker \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445 \u044d\u0442\u043e <strong>jetbrains\/teamcity-server<\/strong> \u0438 <strong>gitlab\/gitlab-ce:latest<\/strong><\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u0440\u0430\u0437\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0442\u0443\u0442 <a class=\"daria-goto-anchor\" href=\"https:\/\/hub.docker.com\/\" target=\"_blank\" rel=\"noopener noreferrer\" data-vdir-href=\"https:\/\/mail.yandex.ru\/re.jsx?uid=9178293&amp;c=LIZA&amp;cv=17.9.156&amp;mid=169447935979844595&amp;h=a,gTr_Qg0gqNBM9u2AKXRX6g&amp;l=aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8\" data-orig-href=\"https:\/\/hub.docker.com\/\">https:\/\/hub.docker.com\/<\/a><\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u0431\u043e\u0440\u043a\u0430 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u0438\u043c\u0435\u0440 \u0441\u0431\u043e\u0440\u043a\u0438 Docker \u043e\u0431\u0440\u0430\u0437\u0430<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0438\u0439 <strong>dockerfile<\/strong><\/p>\n<pre class=\"lang:default decode:true\"># Use an official Python runtime as a parent image\r\n\r\nFROM python:2.7-slim\r\n\r\n# Set the working directory to \/app\r\n\r\nWORKDIR \/app\r\n\r\n# Copy the current directory contents into the container at \/app\r\n\r\nCOPY . \/app\r\n\r\n# Install any needed packages specified in requirements.txt\r\n\r\nRUN pip install --trusted-host pypi.python.org -r requirements.txt\r\n\r\n# Make port 80 available to the world outside this container\r\n\r\nEXPOSE 80\r\n\r\n# Define environment variable\r\n\r\nENV NAME World\r\n\r\n# Run app.py when the container launches\r\n\r\nCMD [\"python\", \"app.py\"]<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f <strong>app.py<\/strong> \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c:<\/p>\n<pre class=\"lang:default decode:true \">from flask import Flask\r\n\r\nfrom redis import Redis, RedisError\r\n\r\nimport os\r\n\r\nimport socket\r\n\r\n# Connect to Redis\r\n\r\nredis = Redis(host=\"redis\", db=0, socket_connect_timeout=2, socket_timeout=2)\r\n\r\n\r\n\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n\r\n\r\n@app.route(\"\/\")\r\n\r\ndef hello():\r\n\r\n\u00a0\u00a0\u00a0 try:\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 visits = redis.incr(\"counter\")\r\n\r\n\u00a0\u00a0\u00a0 except RedisError:\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 visits = \"&lt;i&gt;cannot connect to Redis, counter disabled&lt;\/i&gt;\"\r\n\r\n\r\n\r\n\r\n\u00a0\u00a0\u00a0 html = \"&lt;h3&gt;Hello {name}!&lt;\/h3&gt;\" \\\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"&lt;b&gt;Hostname:&lt;\/b&gt; {hostname}&lt;br\/&gt;\" \\\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"&lt;b&gt;Visits:&lt;\/b&gt; {visits}\"\r\n\r\n\u00a0\u00a0\u00a0 return html.format(name=os.getenv(\"NAME\", \"world\"), hostname=socket.gethostname(), visits=visits)\r\n\r\n\r\n\r\n\r\nif __name__ == \"__main__\":\r\n\r\n\u00a0\u00a0\u00a0 app.run(host='0.0.0.0', port=80)<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u043e\u0437\u0434\u0430\u0438\u043c \u0444\u0430\u0439\u043b \u0441 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438 &#8212; <strong>requirements.txt<\/strong> \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c:<\/p>\n<pre class=\"lang:default decode:true\">Flask\r\nRedis<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043b\u044f \u0441\u0431\u043e\u0440\u043a\u0438 \u043c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0441 \u0440\u0430\u043d\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b ls<\/p>\n<pre class=\"lang:default decode:true \">$ ls\r\n\r\nDockerfile\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 app.py\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 requirements.txt<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441\u0431\u043e\u0440\u043a\u0443 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430:<\/p>\n<pre class=\"lang:default decode:true \">docker build --tag=friendlyhello .<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041c\u044b \u0441\u043e\u0431\u0440\u0430\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c friendlyhello<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0417\u0430\u043f\u0443\u0441\u0438\u043c \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440, \u0441 \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u043e\u043c \u043f\u043e\u0440\u0442\u0430<\/p>\n<pre class=\"lang:default decode:true \">docker run -p 4000:80 friendlyhello<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><a href=\"http:\/\/localhost:4000\">http:\/\/localhost:4000<\/a><\/p>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b<\/strong><\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043e\u0431\u0440\u0430\u0437\u043e\u0432 Docker:<\/p>\n<pre class=\"lang:default decode:true \">docker image ls<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432:<\/p>\n<pre class=\"lang:default decode:true\">$ docker container ls\r\n\r\nCONTAINER ID\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 IMAGE\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 COMMAND\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CREATED\r\n\r\n1fa4ab2cf395\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 friendlyhello\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"python app.py\"\u00a0\u00a0\u00a0\u00a0 28 seconds ago<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041b\u0438\u0431\u043e<\/p>\n<pre class=\"lang:default decode:true \">docker ps -a<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<pre class=\"lang:default decode:true \">docker container stop 1fa4ab2cf395<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<pre class=\"lang:default decode:true \">docker ps -a\r\n\r\nCONTAINER ID\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 IMAGE\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 COMMAND\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CREATED\r\n\r\n1fa4ab2cf395\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 friendlyhello\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"python app.py\"\u00a0\u00a0\u00a0\u00a0 28 seconds ago\r\n\r\ndocker rm 1fa4ab2cf395<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u043d\u0430\u0445\u043e\u0434\u0438\u043c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440:<\/p>\n<pre class=\"lang:default decode:true \">$ docker container ls\r\n\r\nCONTAINER ID\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 IMAGE\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 COMMAND\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CREATED\r\n\r\n1fa4ab2cf395\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 friendlyhello\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"python app.py\"\u00a0\u00a0\u00a0\u00a0 28 seconds ago<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430:<\/p>\n<pre class=\"lang:default decode:true \">docker exec -it 1fa4ab2cf395 bash<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430:<\/p>\n<pre class=\"lang:default decode:true \">$ docker exec -it web ip addr\r\n\r\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN\r\n\r\n\u00a0\u00a0\u00a0\u00a0link\/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\r\n\r\n\u00a0\u00a0\u00a0 inet 127.0.0.1\/8 scope host lo\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 valid_lft forever preferred_lft forever\r\n\r\n\u00a0\u00a0\u00a0 inet6 ::1\/128 scope host\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0valid_lft forever preferred_lft forever\r\n\r\n18: eth0: &lt;BROADCAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP\r\n\r\n\u00a0\u00a0\u00a0\u00a0link\/ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff\r\n\r\n\u00a0\u00a0\u00a0 inet 172.17.0.3\/16 scope global eth0\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 valid_lft forever preferred_lft forever\r\n\r\n\u00a0\u00a0\u00a0 inet6 fe80::42:acff:fe11:3\/64 scope link\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0valid_lft forever preferred_lft forever<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u043f\u0440\u043e\u043a\u0441\u0438 \u043d\u0430 Docker \u0445\u043e\u0441\u0442\u0435<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\"><strong>\u0415\u0421\u041b\u0418 \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0415\u0422\u0421\u042f SYSTEMD<\/strong> \u043d\u0443\u0436\u043d\u043e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u0430 Docker \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043a\u0441\u0438, \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441 \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0432 \u043d\u0435\u0433\u043e \u0441\u0442\u0440\u043e\u043a\u0443:<\/p>\n<pre class=\"lang:default decode:true \">Environment=\"HTTP_PROXY=http:\/\/proxy.example.com:80\/\"<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true\">[Service]\r\n\r\nEnvironment=\"HTTP_PROXY=http:\/\/proxy.example.com:80\/<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f systemd<\/p>\n<pre class=\"lang:default decode:true\">sudo systemctl daemon-reload\r\n\r\nsudo systemctl restart docker<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b <strong>~\/.docker\/config.json<\/strong> \u043f\u043e\u0434 \u0441\u0432\u043e\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c (\u0435\u0441\u043b\u0438 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435\u0442 &#8212; \u0441\u043e\u0437\u0434\u0430\u0435\u043c)<\/p>\n<pre class=\"lang:default decode:true \">{\r\n\r\n\"proxies\":\r\n\r\n{\r\n\r\n\u00a0\u00a0 \"default\":\r\n\r\n\u00a0\u00a0 {\r\n\r\n\u00a0\u00a0\u00a0\u00a0 \"httpProxy\": \"http:\/\/127.0.0.1:3001\",\r\n\r\n\u00a0\u00a0\u00a0\u00a0 \"httpsProxy\": \"http:\/\/127.0.0.1:3001\",\r\n\r\n\u00a0\u00a0\u00a0\u00a0 \"noProxy\": \"*.test.example.com,.example2.com\"\r\n\r\n\u00a0\u00a0 }\r\n\r\n}\r\n\r\n}<\/pre>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u043e\u043a\u0441\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0443, \u0447\u0435\u0440\u0435\u0437 Docker run,<\/p>\n<pre class=\"lang:default decode:true \">--env HTTP_PROXY=\"http:\/\/127.0.0.1:3128\"\r\n\r\n--env HTTPS_PROXY=\"https:\/\/127.0.0.1:3128\"\r\n\r\n--env FTP_PROXY=\"ftp:\/\/127.0.0.1:3001\"\r\n\r\n--env NO_PROXY=\"*.test.example.com,.example2.com\"<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0418\u043b\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 Dockerfile<\/p>\n<pre class=\"lang:default decode:true \">ENV HTTP_PROXY \"http:\/\/127.0.0.1:3001\"\r\n\r\nENV HTTPS_PROXY \"https:\/\/127.0.0.1:3001\"\r\n\r\nENV FTP_PROXY \"ftp:\/\/127.0.0.1:3001\"\r\n\r\nENV NO_PROXY \"*.test.example.com,.example2.com\"<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0421\u0431\u043e\u0440\u043a\u0430 Dockerfile \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u043a\u0441\u0438:<\/p>\n<pre class=\"lang:default decode:true \">docker build --build-arg http_proxy=http:\/\/127.0.0.1:3001 --build-arg https_proxy=http:\/\/127.0.0.1:3001<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0427\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c IP \u0430\u0434\u0440\u0435\u0441 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b:<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u043d\u0430\u0445\u043e\u0434\u0438\u043c \u043d\u0443\u0436\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440<\/p>\n<pre class=\"lang:default decode:true \">$ docker container ls\r\n\r\nCONTAINER ID\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 IMAGE\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 COMMAND\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CREATED\r\n\r\n1fa4ab2cf395\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 friendlyhello\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"python app.py\"\u00a0\u00a0\u00a0\u00a0 28 seconds ago<\/pre>\n<p>&nbsp;<\/p>\n<p class=\"db9fe9049761426654245bb2dd862eecMsoNormal\">\u0423\u0437\u043d\u0430\u0435\u043c \u0435\u0433\u043e ip \u0430\u0434\u0440\u0435\u0441:<\/p>\n<pre class=\"lang:default decode:true \">docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' 1fa4ab2cf395<\/pre>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0412 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u044f \u0445\u043e\u0442\u0435\u043b \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0435\u0446\u0435\u043f\u0442\u044b \u0438 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u043e Docker, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u043d\u0438\u043c \u0438 \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[12,8,6,54],"tags":[],"class_list":["post-1269","post","type-post","status-publish","format-standard","hentry","category-cloud","category-debian","category-linux","category-webcloud","post-container col-md-12"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1269","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=1269"}],"version-history":[{"count":2,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1269\/revisions"}],"predecessor-version":[{"id":1271,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/1269\/revisions\/1271"}],"wp:attachment":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=1269"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=1269"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=1269"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}