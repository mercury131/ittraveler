{"id":597,"date":"2015-06-17T17:20:35","date_gmt":"2015-06-17T14:20:35","guid":{"rendered":"http:\/\/ittraveler.org\/?p=597"},"modified":"2015-06-19T16:58:06","modified_gmt":"2015-06-19T13:58:06","slug":"ustanovka-i-nastrojka-veb-servera-nginx","status":"publish","type":"post","link":"https:\/\/ittraveler.org\/ustanovka-i-nastrojka-veb-servera-nginx\/","title":{"rendered":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Nginx"},"content":{"rendered":"<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Nginx, ssl, \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0441\u0430\u0439\u0442\u043e\u0432.<!--more--><\/p>\n<p>\u041e\u0431\u043d\u043e\u0432\u0438\u043c \u0432\u0441\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get update<\/pre>\n<pre class=\"lang:default decode:true\">apt-get upgrade<\/pre>\n<p>\u0423\u0434\u0430\u043b\u0438\u043c \u043a\u044d\u0448 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0438 \u043d\u0435\u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b:<\/p>\n<pre class=\"lang:default decode:true\">apt-get clean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoclean<\/pre>\n<pre class=\"lang:default decode:true\">apt-get autoremove<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441.<\/p>\n<pre class=\"lang:default decode:true\">dpkg-reconfigure tzdata<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c NTP.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install ntp<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c Openssh \u0441\u0435\u0440\u0432\u0435\u0440 (\u0435\u0441\u043b\u0438 \u043e\u043d \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d).<\/p>\n<pre class=\"lang:default decode:true\">apt-get install openssh-server<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440 Nginx.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install nginx<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c Mysql \u0441\u0435\u0440\u0432\u0435\u0440.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install mysql-server<\/pre>\n<p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c Mysql.<\/p>\n<pre class=\"lang:default decode:true\">mysql_secure_installation<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c PHP.<\/p>\n<pre class=\"lang:default decode:true\">apt-get install php5-fpm php5-mysql<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f firewall.<\/p>\n<pre class=\"lang:default decode:true\">ufw allow OpenSSH<\/pre>\n<pre class=\"lang:default decode:true\">ufw allow 80\/tcp<\/pre>\n<pre class=\"lang:default decode:true\">ufw limit OpenSSH<\/pre>\n<pre class=\"lang:default decode:true\">ufw enable<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430.<\/p>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435.<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/php5\/fpm\/php.ini<\/strong> \u0438 \u043c\u0435\u043d\u044f\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <strong>cgi.fix_pathinfo=1<\/strong> \u043d\u0430 <strong>0<\/strong><\/p>\n<p>\u0414\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0442\u0430\u043a:<\/p>\n<pre class=\"lang:default decode:true\">cgi.fix_pathinfo=0<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/etc\/php5\/fpm\/pool.d\/www.conf<\/strong> \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0432 \u043d\u0435\u0433\u043e \u0441\u0442\u0440\u043e\u043a\u0443:<\/p>\n<pre class=\"lang:default decode:true\">listen = \/var\/run\/php5-fpm.sock<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c PHP.<\/p>\n<pre class=\"lang:default decode:true\">service php5-fpm restart<\/pre>\n<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u0430\u0439\u0442 \u043d\u0430 80-\u043c \u043f\u043e\u0440\u0442\u0443.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0430\u043f\u043a\u0443 \u0441 \u0441\u0430\u0439\u0442\u0430\u043c\u0438 (\u0435\u0441\u043b\u0438 \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0430\u043f\u043a\u0443 \/var\/www).<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/hosting<\/pre>\n<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u0438\u043c\u0435\u0440 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 CMS WordPress.<\/p>\n<p>\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e WordPress.<\/p>\n<pre class=\"lang:default decode:true\">wget http:\/\/wordpress.org\/latest.tar.gz<\/pre>\n<p>\u0420\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u044b\u0432\u0430\u0435\u043c.<\/p>\n<pre class=\"lang:default decode:true\">tar -xzvf latest.tar.gz<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0411\u0414 Mysql \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430.<\/p>\n<p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a Mysql.<\/p>\n<pre class=\"lang:default decode:true\">mysql -u root -p<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0411\u0414 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c <strong>wordpress.<\/strong><\/p>\n<pre class=\"lang:default decode:true\">CREATE DATABASE wordpress;<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f <strong>wordpressuser.<\/strong><\/p>\n<pre class=\"lang:default decode:true\">CREATE USER wordpressuser@localhost;<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0430\u0440\u043e\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e.<\/p>\n<pre class=\"lang:default decode:true\">SET PASSWORD FOR wordpressuser@localhost= PASSWORD(\"password\");<\/pre>\n<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0439 \u0440\u0430\u043d\u0435\u0435 \u0411\u0414.<\/p>\n<pre class=\"lang:default decode:true\">GRANT ALL PRIVILEGES ON wordpress.* TO wordpressuser@localhost IDENTIFIED BY 'password';<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438 Mysql.<\/p>\n<pre class=\"lang:default decode:true\">FLUSH PRIVILEGES;<\/pre>\n<p>\u0412\u044b\u0445\u043e\u0434\u0438\u043c \u0438\u0437 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 Mysql.<\/p>\n<pre class=\"lang:default decode:true\">exit<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u043c CMS WordPress \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0411\u0414.<\/p>\n<p>\u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 WordPress.<\/p>\n<pre class=\"lang:default decode:true\">cp ~\/wordpress\/wp-config-sample.php ~\/wordpress\/wp-config.php<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u0430\u0439\u043b <strong>\/wordpress\/wp-config.php<\/strong> \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:<\/p>\n<pre class=\"lang:default decode:true\">\/\/ ** MySQL settings - You can get this info from your web host ** \/\/\r\n\/** The name of the database for WordPress *\/\r\ndefine('DB_NAME', 'wordpress');\r\n\r\n\/** MySQL database username *\/\r\ndefine('DB_USER', 'wordpressuser');\r\n\r\n\/** MySQL database password *\/\r\ndefine('DB_PASSWORD', 'password');<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043f\u0430\u043f\u043a\u0443 \u0441 \u0441\u0430\u0439\u0442\u043e\u043c.<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/hosting\/wordpress<\/pre>\n<p>\u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0441\u0430\u0439\u0442.<\/p>\n<pre class=\"lang:default decode:true\">cp -r ~\/wordpress\/* \/hosting\/wordpress<\/pre>\n<p>\u041d\u0430\u0437\u043d\u0430\u0447\u0430\u0435\u043c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0441 \u0441\u0430\u0439\u0442\u0430\u043c\u0438 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0443.<\/p>\n<pre class=\"lang:default decode:true\">chown -R www-data \/hosting\/<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c A \u0437\u0430\u043f\u0438\u0441\u044c \u0432 DNS \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u0441\u0430\u0439\u0442\u0430 (\u0432 \u043c\u043e\u0435\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 &#8212; <strong>wordpress.test.com<\/strong>).<\/p>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u043e\u0432 \u0441\u0430\u0439\u0442\u0430.<\/p>\n<p>\u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0438.<\/p>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-available\/*<\/pre>\n<pre class=\"lang:default decode:true\">rm -f \/etc\/nginx\/sites-enabled\/*<\/pre>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430.<\/p>\n<pre class=\"lang:default decode:true\">touch \/etc\/nginx\/sites-available\/wordpress<\/pre>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u043c \u043a \u0432\u0438\u0434\u0443:<\/p>\n<pre class=\"lang:default decode:true\">server {\r\nlisten 80;\r\n\r\n\r\nroot \/hosting\/wordpress;\r\nindex index.php index.html index.htm;\r\n\r\nserver_name wordpress.test.com;\r\n\r\nlocation \/ {\r\ntry_files $uri $uri\/ \/index.php?q=$uri&amp;$args;\r\n}\r\n\r\nerror_page 404 \/404.html;\r\n\r\nerror_page 500 502 503 504 \/50x.html;\r\nlocation = \/50x.html {\r\nroot \/usr\/share\/nginx\/www;\r\n}\r\n\r\n\r\nlocation ~ \\.php$ {\r\ntry_files $uri =404;\r\nfastcgi_pass unix:\/var\/run\/php5-fpm.sock;\r\nfastcgi_index index.php;\r\ninclude fastcgi_params;\r\n}\r\n\r\n}<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435:<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>listen 80;<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u00a0\u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u0442\u0443 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u0430\u0439\u0442<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <strong>root<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0441\u0430\u0439\u0442\u0430<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u00a0<strong>index<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u0430\u0439\u0442\u0430<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u00a0<strong>server_name<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 dns \u0438\u043c\u044f \u0441\u0430\u0439\u0442\u0430<\/p>\n<p>\u0421\u0435\u043a\u0446\u0438\u044f :<\/p>\n<pre class=\"lang:default decode:true \">location \/ {\r\ntry_files $uri $uri\/ \/index.php?q=$uri&amp;$args;\r\n}<\/pre>\n<p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u0435\u0440\u043c\u0430\u043d\u0435\u043d\u0442\u043d\u044b\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u0432 wordpress<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u00a0<strong>error_page<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u0441 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u00a0<strong>location ~ \\.php$<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 php5-fpm<\/p>\n<p>\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433.<\/p>\n<p>\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0441\u0430\u0439\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.<\/p>\n<pre class=\"lang:default decode:true\">ln -s \/etc\/nginx\/sites-available\/wordpress \/etc\/nginx\/sites-enabled\/wordpress<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c Nginx.<\/p>\n<pre class=\"lang:default decode:true\">service nginx restart<\/pre>\n<p>\u0413\u043e\u0442\u043e\u0432\u043e! \u0422\u0435\u043f\u0435\u0440\u044c \u0441\u0430\u0439\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 &#8212; <strong>http:\/\/wordpress.test.com<\/strong><\/p>\n<p>\u041f\u0435\u0440\u0435\u0439\u0434\u0435\u043c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 SSL.<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0430\u043f\u043a\u0443 \u0434\u043b\u044f SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 Nginx.<\/p>\n<pre class=\"lang:default decode:true\">mkdir \/etc\/nginx\/ssl<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.<\/p>\n<pre class=\"lang:default decode:true\">openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout \/etc\/nginx\/ssl\/nginx.key -out \/etc\/nginx\/ssl\/nginx.crt<\/pre>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0432\u0432\u043e\u0434\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043d\u0430\u0448\u0435\u043c\u0443 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0443.<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u0441\u0430\u0439\u0442 \u0441 WordPress \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 SSL.<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433 <strong>\/etc\/nginx\/sites-available\/wordpress<\/strong><\/p>\n<p>\u0418 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u043c \u043a \u0432\u0438\u0434\u0443:<\/p>\n<pre class=\"lang:default decode:true\">server {\r\nlisten 80;\r\nserver_name wordpress.test.com;\r\nlocation \/ {\r\nrewrite ^(.*)$ https:\/\/wordpress.test.com$1 permanent;\r\n}\r\nlisten 443 ssl;\r\n\r\n\r\nroot \/hosting\/wordpress;\r\nindex index.php index.html index.htm;\r\n\r\nserver_name wordpress.test.com;\r\nssl_certificate \/etc\/nginx\/ssl\/nginx.crt;\r\nssl_certificate_key \/etc\/nginx\/ssl\/nginx.key;\r\n\r\nlocation \/ {\r\ntry_files $uri $uri\/ \/index.php?q=$uri&amp;$args;\r\n}\r\n\r\nerror_page 404 \/404.html;\r\n\r\nerror_page 500 502 503 504 \/50x.html;\r\nlocation = \/50x.html {\r\nroot \/usr\/share\/nginx\/www;\r\n}\r\n\r\n\r\nlocation ~ \\.php$ {\r\ntry_files $uri =404;\r\nfastcgi_pass unix:\/var\/run\/php5-fpm.sock;\r\nfastcgi_index index.php;\r\ninclude fastcgi_params;\r\n}\r\n\r\n}<\/pre>\n<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435:<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430<strong>\u00a0rewrite<\/strong> \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441 http \u043d\u0430 https<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u00a0<strong>listen 443 ssl;<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0447\u0442\u043e \u0441\u0430\u0439\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 ssl \u043d\u0430 443 \u043f\u043e\u0440\u0442\u0443<\/p>\n<p>\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b\u00a0<strong>ssl_certificate<\/strong> \u0438\u00a0<strong>ssl_certificate_key<\/strong> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0430\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430.<\/p>\n<p>\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043f\u043e\u0440\u0442 \u043d\u0430 firewall.<\/p>\n<pre class=\"lang:default decode:true\">ufw allow 443\/tcp<\/pre>\n<p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0438 Nginx.<\/p>\n<pre class=\"lang:default decode:true\">service nginx reload<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0438 url <em>http:\/\/wordpress.test.com<\/em> \u0431\u0443\u0434\u0435\u0442 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430 <em>https:\/\/wordpress.test.com<\/em><\/p>\n<p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 SSL \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430.<\/p>\n<p>\u0423\u0434\u0430\u0447\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438! =)<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Nginx, ssl, \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0441\u0430\u0439\u0442\u043e\u0432.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[6,7,11,54],"tags":[74,101,100],"class_list":["post-597","post","type-post","status-publish","format-standard","hentry","category-linux","category-ubuntu","category-web","category-webcloud","tag-linux","tag-nginx","tag-veb-servera","post-container col-md-12"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/597","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/comments?post=597"}],"version-history":[{"count":7,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/597\/revisions"}],"predecessor-version":[{"id":608,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/posts\/597\/revisions\/608"}],"wp:attachment":[{"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/media?parent=597"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/categories?post=597"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/ittraveler.org\/wp-json\/wp\/v2\/tags?post=597"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}